{"version":3,"file":"backend.js","mappings":";;;;;;AAAA,iBAAiB,mBAAO,CAAC,GAAgC;AACzD,oBAAoB,mBAAO,CAAC,GAAmC;AAC/D,sBAAsB,mBAAO,CAAC,GAAqC;;AAEnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,mBAAmB,sCAAsC;AACzD;AACA;AACA;;AAEA;AACA;;;;;;;;AC3BA;AACA;AACA;AACA,yBAAyB,8EAA8E;AACvG;AACA;AACA,qBAAqB,sCAAsC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACxPA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA,qBAAqB,sCAAsC;AAC3D,4CAA4C,gEAAgE;AAC5G,SAAS;AACT,OAAO;AACP;;AAEA,iCAAiC,qEAAqE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,8BAA8B,+BAA+B;AAC7D;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACvEA,uBAAuB,mBAAO,CAAC,GAA2B;AAC1D,mBAAmB,mBAAO,CAAC,GAAuB;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;AClBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,aAAa;AAC/B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kBAAkB,6BAA6B;AAC/C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;;;;;;;;AC7GA;AACA;;;;;;;;ACDA;;;;;;;;ACAA;AACA;AACA;;;;;;;;ACFA;AACA,WAAW,mBAAO,CAAC,GAAmB;AACtC,WAAW,mBAAO,CAAC,EAAmB;AACtC;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClGA,6BAA6B,mBAAO,CAAC,GAAkC;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA;AACA;AACA;;;;;;;;ACHA;AACA;AACA;AACA;;;;;;;;ACHA,eAAe,mBAAO,CAAC,EAAoB;AAC3C,gBAAgB,mBAAO,CAAC,EAAqB;AAC7C,eAAe,mBAAO,CAAC,GAAoB;;AAE3C;AACA;AACA,gBAAgB,mBAAO,CAAC,GAAY;AACpC;AACA,iBAAiB,mBAAO,CAAC,GAAa;AACtC;AACA,sBAAsB,mBAAO,CAAC,EAAkB;AAChD;AACA,mBAAmB,mBAAO,CAAC,GAAe;AAC1C;AACA,iBAAiB,mBAAO,CAAC,GAAa;AACtC;AACA,oBAAoB,mBAAO,CAAC,GAAuB;AACnD;AACA,eAAe,mBAAO,CAAC,GAAW;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChCA;AACA,kBAAkB,mBAAO,CAAC,GAAgC;AAC1D,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,oBAAoB;AACpB,kBAAkB;AAClB;AACA,KAAK;AACL;AACA;AACA;;;;;;;;ACnBA;AACA;AACA;AACA,mBAAmB,iCAAiC,yBAAyB;AAC7E;AACA;;AAEA;AACA;;;;;;;;ACRA,mBAAmB,mBAAO,CAAC,GAAuB;;AAElD;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACPA;AACA;AACA;AACA;;;;;;;;ACHA;AACA;AACA;AACA;;;;;;;UCHA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://egg-born-module-a-detail/./backend/src/bean/bean.detail.js","webpack://egg-born-module-a-detail/./backend/src/bean/bean.detail/bean.detail_0.js","webpack://egg-born-module-a-detail/./backend/src/bean/bean.detail/bean.detail_copy.js","webpack://egg-born-module-a-detail/./backend/src/bean/bean.detail/bean.detail_delete.js","webpack://egg-born-module-a-detail/./backend/src/bean/version.manager.js","webpack://egg-born-module-a-detail/./backend/src/beans.js","webpack://egg-born-module-a-detail/./backend/src/config/config.js","webpack://egg-born-module-a-detail/./backend/src/config/constants.js","webpack://egg-born-module-a-detail/./backend/src/config/errors.js","webpack://egg-born-module-a-detail/./backend/src/config/locale/en-us.js","webpack://egg-born-module-a-detail/./backend/src/config/locale/zh-cn.js","webpack://egg-born-module-a-detail/./backend/src/config/locales.js","webpack://egg-born-module-a-detail/./backend/src/config/static/layout/layoutDetailListBase.js","webpack://egg-born-module-a-detail/./backend/src/config/static/layouts.js","webpack://egg-born-module-a-detail/./backend/src/config/validation/schemas.js","webpack://egg-born-module-a-detail/./backend/src/controllers.js","webpack://egg-born-module-a-detail/./backend/src/main.js","webpack://egg-born-module-a-detail/./backend/src/meta.js","webpack://egg-born-module-a-detail/./backend/src/model/detailBase.js","webpack://egg-born-module-a-detail/./backend/src/models.js","webpack://egg-born-module-a-detail/./backend/src/routes.js","webpack://egg-born-module-a-detail/./backend/src/services.js","webpack://egg-born-module-a-detail/webpack/bootstrap","webpack://egg-born-module-a-detail/webpack/before-startup","webpack://egg-born-module-a-detail/webpack/startup","webpack://egg-born-module-a-detail/webpack/after-startup"],"sourcesContent":["const detail_0 = require('./bean.detail/bean.detail_0.js');\nconst detail_copy = require('./bean.detail/bean.detail_copy.js');\nconst detail_delete = require('./bean.detail/bean.detail_delete.js');\n\nmodule.exports = ctx => {\n  return ctx.app.meta.util.mixinClasses(\n    detail_0,\n    [\n      detail_copy, //\n      detail_delete,\n    ],\n    ctx\n  );\n};\n","module.exports = ctx => {\n  const moduleInfo = ctx.app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  class Detail extends ctx.app.meta.BeanModuleBase {\n    constructor(moduleName) {\n      super(ctx, 'detail');\n      this.moduleName = moduleName || ctx.module.info.relativeName;\n    }\n\n    get modelDetailBase() {\n      return ctx.model.module(moduleInfo.relativeName).detailBase;\n    }\n\n    async _loopDetailClasses({ atomClass, fn }) {\n      // all details of atom\n      const atomClassBase = await ctx.bean.atomClass.atomClass(atomClass);\n      const atomClassDetails = atomClassBase.details;\n      if (!atomClassDetails) return; // do nothing\n      // loop\n      for (let atomClassDetail of atomClassDetails) {\n        atomClassDetail = await ctx.bean.atomClass.get(atomClassDetail);\n        const atomClassBaseDetail = await ctx.bean.atomClass.atomClass(atomClassDetail);\n        await fn({ atomClassDetail, atomClassBaseDetail });\n      }\n    }\n  }\n\n  return Detail;\n};\n","module.exports = ctx => {\n  // const moduleInfo = ctx.app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  class Detail {\n    async _copyDetails({ atomClass, target, srcKeyAtom, destKeyAtom, srcAtom, destAtom, options, user }) {\n      await this._loopDetailClasses({\n        atomClass,\n        fn: async ({ atomClassDetail, atomClassBaseDetail }) => {\n          await this._copyDetails_Class({\n            atomClassDetail,\n            atomClassBaseDetail,\n            atomClass,\n            target,\n            srcKeyAtom,\n            destKeyAtom,\n            srcAtom,\n            destAtom,\n            options,\n            user,\n          });\n        },\n      });\n    }\n\n    async _copyDetails_Class({\n      atomClassDetail,\n      atomClassBaseDetail,\n      atomClass,\n      target,\n      srcKeyAtom,\n      destKeyAtom,\n      srcAtom,\n      destAtom,\n      options,\n      user,\n    }) {\n      // select all details src\n      const detailsSrc = await ctx.bean.atom.select({\n        atomClass: atomClassDetail,\n        options: {\n          atomIdMain: srcKeyAtom.atomId,\n          mode: 'full',\n        },\n        pageForce: false,\n      });\n      // special for clone\n      if (target === 'clone') {\n        for (const detailSrc of detailsSrc) {\n          await this._copyDetail({\n            atomClassDetail,\n            atomClassBaseDetail,\n            atomClass,\n            target,\n            srcKeyAtom,\n            destKeyAtom,\n            srcAtom,\n            destAtom,\n            options,\n            user,\n            detailSrc,\n          });\n        }\n        return;\n      }\n      // select all details dest\n      const detailsDest = await ctx.bean.atom.select({\n        atomClass: atomClassDetail,\n        options: {\n          atomIdMain: destKeyAtom.atomId,\n          // mode: 'full',\n        },\n      });\n      // detailStaticKey\n      const detailBasesSrc = await this._copyDetails_prepareStaticKey({\n        atomClassDetail,\n        atomClassBaseDetail,\n        atomClass,\n        target,\n        srcKeyAtom,\n        destKeyAtom,\n        srcAtom,\n        destAtom,\n        options,\n        user,\n        detailsSrc,\n      });\n      // select all details base dest\n      const detailBasesDest = await this.modelDetailBase.select({\n        where: {\n          atomIdMain: destKeyAtom.atomId,\n          atomClassIdMain: atomClass.id,\n        },\n      });\n      // loop\n      for (const detailBaseDest of detailBasesDest) {\n        const detailDest = detailsDest.find(item => item.atomId === detailBaseDest.detailId);\n        const detailKeyDest = {\n          atomId: detailDest.atomId,\n          itemId: detailDest.itemId,\n        };\n        const detailBaseSrc = detailBasesSrc.find(item => item.detailStaticKey === detailBaseDest.detailStaticKey);\n        if (!detailBaseSrc) {\n          // delete\n          await ctx.bean.atom.delete({\n            key: detailKeyDest,\n            atomClass: atomClassDetail,\n            user,\n          });\n        } else {\n          const detailSrc = detailsSrc.find(item => item.atomId === detailBaseSrc.detailId);\n          // write\n          await this._copyDetail({\n            atomClassDetail,\n            atomClassBaseDetail,\n            atomClass,\n            target,\n            srcKeyAtom,\n            destKeyAtom,\n            srcAtom,\n            destAtom,\n            options,\n            user,\n            detailSrc,\n            detailKeyDest,\n          });\n          // set flag\n          detailBaseSrc.__copied = true;\n        }\n      }\n      // loop: append the remains\n      for (const detailBaseSrc of detailBasesSrc) {\n        if (detailBaseSrc.__copied) continue;\n        const detailSrc = detailsSrc.find(item => item.atomId === detailBaseSrc.detailId);\n        await this._copyDetail({\n          atomClassDetail,\n          atomClassBaseDetail,\n          atomClass,\n          target,\n          srcKeyAtom,\n          destKeyAtom,\n          srcAtom,\n          destAtom,\n          options,\n          user,\n          detailBaseSrc,\n          detailSrc,\n        });\n      }\n    }\n\n    async _copyDetail({\n      atomClassDetail,\n      atomClassBaseDetail,\n      atomClass,\n      target,\n      /* srcKeyAtom,*/\n      destKeyAtom,\n      /* srcAtom,*/\n      destAtom,\n      options,\n      user,\n      detailBaseSrc,\n      detailSrc,\n      detailKeyDest,\n    }) {\n      // create detail\n      if (!detailKeyDest) {\n        detailKeyDest = await ctx.bean.atom.create({\n          atomClass: atomClassDetail,\n          item: null,\n          options: { atomIdMain: destKeyAtom.atomId },\n          user,\n        });\n      }\n      // create detail base\n      if (detailBaseSrc) {\n        const data = {\n          atomIdMain: destKeyAtom.atomId,\n          atomClassIdMain: atomClass.id,\n          atomStage: destAtom.atomStage,\n          detailId: detailKeyDest.atomId,\n          detailClassId: atomClassDetail.id,\n          detailStaticKey: detailBaseSrc.detailStaticKey,\n        };\n        await this.modelDetailBase.insert(data);\n      }\n      // write\n      const fieldNameAtomIdMain = atomClassBaseDetail.detail.atomIdMain;\n      const item = {\n        ...detailSrc,\n        atomId: detailKeyDest.atomId,\n        itemId: detailKeyDest.itemId,\n        [fieldNameAtomIdMain]: destKeyAtom.atomId,\n      };\n      if (target === 'clone') {\n        item.createdAt = new Date();\n        item.updatedAt = new Date();\n      }\n      await ctx.bean.atom.write({\n        key: detailKeyDest,\n        atomClass: atomClassDetail,\n        item,\n        options: { ignoreValidate: true },\n        user,\n      });\n    }\n\n    async _copyDetails_prepareStaticKey({\n      atomClassDetail,\n      /* atomClassBaseDetail,*/\n      atomClass,\n      /* target,*/\n      srcKeyAtom,\n      /* destKeyAtom,*/\n      srcAtom,\n      /* destAtom,*/\n      options,\n      user,\n      detailsSrc,\n    }) {\n      // detailBasesSrc\n      const detailBasesSrc = await this.modelDetailBase.select({\n        where: {\n          atomIdMain: srcKeyAtom.atomId,\n          atomClassIdMain: atomClass.id,\n        },\n      });\n      // find missing detailStaticKey\n      const detailBasesId = detailBasesSrc.map(item => item.detailId);\n      const detailsSrcMissing = detailsSrc.filter(item => !detailBasesId.includes(item.id));\n      // create detail base\n      for (const detailSrcMissing of detailsSrcMissing) {\n        const data = {\n          atomIdMain: srcKeyAtom.atomId,\n          atomClassIdMain: atomClass.id,\n          atomStage: srcAtom.atomStage,\n          detailId: detailSrcMissing.atomId,\n          detailClassId: atomClassDetail.id,\n          detailStaticKey: ctx.bean.util.uuidv4(),\n        };\n        const res = await this.modelDetailBase.insert(data);\n        data.id = res.insertId;\n        detailBasesSrc.push(data);\n      }\n      return detailBasesSrc;\n    }\n  }\n\n  return Detail;\n};\n","module.exports = ctx => {\n  // const moduleInfo = ctx.app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  class Detail {\n    async _deleteDetails({ atomClass, atomKey, user }) {\n      await this._loopDetailClasses({\n        atomClass,\n        fn: async ({ atomClassDetail, atomClassBaseDetail }) => {\n          await this._deleteDetails_Class({ atomClassDetail, atomClassBaseDetail, atomClass, atomKey, user });\n        },\n      });\n    }\n\n    async _deleteDetails_Class({ atomClassDetail, /* atomClassBaseDetail, atomClass,*/ atomKey, user }) {\n      // select all details\n      const details = await ctx.bean.atom.select({\n        atomClass: atomClassDetail,\n        options: {\n          atomIdMain: atomKey.atomId,\n          // mode: 'full',\n        },\n      });\n      // loop\n      for (const detail of details) {\n        const detailKey = {\n          atomId: detail.atomId,\n          itemId: detail.itemId,\n        };\n        // delete\n        await ctx.bean.atom.delete({\n          key: detailKey,\n          atomClass: atomClassDetail,\n          user,\n        });\n      }\n    }\n\n    async _deleteDetailBase({ atomClass, key, options, user }) {\n      await this.modelDetailBase.delete({\n        detailId: key.atomId,\n        detailClassId: atomClass.id,\n      });\n    }\n  }\n\n  return Detail;\n};\n","module.exports = app => {\n  class Version extends app.meta.BeanBase {\n    async update(options) {\n      if (options.version === 1) {\n        // // create table: aDetail\n        // let sql = `\n        //   CREATE TABLE aDetail (\n        //     id int(11) NOT NULL AUTO_INCREMENT,\n        //     createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n        //     updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        //     deleted int(11) DEFAULT '0',\n        //     iid int(11) DEFAULT '0',\n        //     atomId int(11) DEFAULT '0',\n        //     atomStage int(11) DEFAULT '0',\n        //     detailItemId int(11) DEFAULT '0',\n        //     detailClassId int(11) DEFAULT '0',\n        //     detailCodeId int(11) DEFAULT '0',\n        //     detailCode varchar(255) DEFAULT NULL,\n        //     detailName varchar(255) DEFAULT NULL,\n        //     detailLineNo int(11) DEFAULT '0',\n        //     detailStatic int(11) DEFAULT '0',\n        //     detailStaticKey varchar(255) DEFAULT NULL,\n        //     userIdCreated int(11) DEFAULT '0',\n        //     userIdUpdated int(11) DEFAULT '0',\n        //     PRIMARY KEY (id)\n        //   )\n        // `;\n        // await this.ctx.model.query(sql);\n        // // create table: aDetailClass\n        // sql = `\n        //   CREATE TABLE aDetailClass (\n        //     id int(11) NOT NULL AUTO_INCREMENT,\n        //     createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n        //     updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        //     deleted int(11) DEFAULT '0',\n        //     iid int(11) DEFAULT '0',\n        //     module varchar(255) DEFAULT NULL,\n        //     detailClassName varchar(255) DEFAULT NULL,\n        //     PRIMARY KEY (id)\n        //   )\n        // `;\n        // await this.ctx.model.query(sql);\n      }\n      if (options.version === 2) {\n        // create table: aDetailBase\n        const sql = `\n          CREATE TABLE aDetailBase (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n            deleted int(11) DEFAULT '0',\n            iid int(11) DEFAULT '0',\n            atomIdMain int(11) DEFAULT '0',\n            atomClassIdMain int(11) DEFAULT '0',\n            atomStage int(11) DEFAULT '0',\n            detailId int(11) DEFAULT '0',\n            detailClassId int(11) DEFAULT '0',\n            detailStaticKey varchar(255) DEFAULT NULL,\n            PRIMARY KEY (id)\n          )\n        `;\n        await this.ctx.model.query(sql);\n      }\n    }\n\n    async init(options) {}\n\n    async test() {}\n  }\n\n  return Version;\n};\n","const versionManager = require('./bean/version.manager.js');\nconst beanDetail = require('./bean/bean.detail.js');\n\nmodule.exports = app => {\n  const beans = {\n    // version\n    'version.manager': {\n      mode: 'app',\n      bean: versionManager,\n    },\n    // global\n    detail: {\n      mode: 'ctx',\n      bean: beanDetail,\n      global: true,\n    },\n  };\n  return beans;\n};\n","// eslint-disable-next-line\nmodule.exports = appInfo => {\n  const config = {};\n\n  // middlewares\n  config.middlewares = {};\n\n  return config;\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  return {\n    detail: {\n      // action: {\n      //   create: 1,\n      //   read: 2,\n      //   write: 3,\n      //   delete: 4,\n      //   clone: 5,\n      //   moveUp: 6,\n      //   moveDown: 7,\n\n      //   save: 51,\n\n      //   custom: 100, // custom action start from custom\n      // },\n      actionMeta: {\n        create: {\n          title: 'Create',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          bulk: true,\n          select: false,\n          icon: { f7: '::add' },\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n        },\n        read: {\n          title: 'View',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          icon: { f7: '::visibility' },\n          rightInherit: 'read',\n          mode: 'view',\n          stage: '',\n        },\n        write: {\n          title: 'Edit',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          icon: { f7: '::edit' },\n          color: 'orange',\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n          directShowOnSwipeout: true,\n          directShowOnList: true,\n        },\n        delete: {\n          title: 'Delete',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          icon: { f7: '::delete' },\n          color: 'red',\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n          directShowOnSwipeout: true,\n          directShowOnList: true,\n        },\n        clone: {\n          title: 'Clone',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          icon: { f7: ':outline:copy-outline' },\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n        },\n        moveUp: {\n          title: 'Move Up',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          icon: { f7: '::arrow-up' },\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n          directShowOnList: true,\n          disableOnItem: true,\n        },\n        moveDown: {\n          title: 'Move Down',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          icon: { f7: '::arrow-down' },\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n          directShowOnList: true,\n          disableOnItem: true,\n        },\n        save: {\n          title: 'Save',\n          actionModule: 'a-base',\n          actionComponent: 'action',\n          authorize: false,\n          icon: { f7: '::save' },\n          rightInherit: 'write',\n          mode: 'edit',\n          stage: 'draft',\n        },\n        custom: {\n          title: 'Custom',\n        },\n      },\n    },\n  };\n};\n","// error code should start from 1001\nmodule.exports = {};\n","module.exports = {};\n","module.exports = {\n  'Base(Details)': '基础(明细)',\n};\n","module.exports = {\n  'en-us': require('./locale/en-us.js'),\n  'zh-cn': require('./locale/zh-cn.js'),\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const content = {\n    info: {\n      layout: {\n        viewSize: {\n          view: {\n            small: 'list',\n            medium: 'table',\n            large: 'table',\n          },\n          edit: {\n            small: 'list',\n            medium: 'table',\n            large: 'table',\n          },\n        },\n      },\n      filter: false,\n    },\n    layouts: {\n      base: {\n        blocks: {\n          title: {\n            component: {\n              module: 'a-detail',\n              name: 'listLayoutBlockListTitle',\n            },\n          },\n        },\n      },\n      list: {\n        title: 'LayoutList',\n        component: {\n          module: 'a-detail',\n          name: 'listLayoutList',\n        },\n        blocks: {\n          items: {\n            component: {\n              module: 'a-baselayout',\n              name: 'baseLayoutBlockListItems',\n            },\n          },\n          item: {\n            component: {\n              module: 'a-baselayout',\n              name: 'listLayoutBlockListItem',\n            },\n            options: {\n              mapper: {\n                media: '_indexTotal', // false/true/_index/_indexTotal/mediaFieldName\n              },\n            },\n          },\n        },\n      },\n      table: {\n        title: 'LayoutTable',\n        component: {\n          module: 'a-detail',\n          name: 'listLayoutTable',\n        },\n        blocks: {\n          items: {\n            component: {\n              module: 'a-baselayout',\n              name: 'baseLayoutBlockTableItems',\n            },\n            enableTableHeight: false,\n            sorter: false,\n            columns: [\n              {\n                dataIndex: 'detailLineNo',\n                title: '#',\n                align: 'center',\n                width: 50,\n                component: {\n                  module: 'a-detail',\n                  name: 'listLayoutTableCellDetailLineNo',\n                },\n              },\n            ],\n          },\n        },\n      },\n    },\n  };\n  const layout = {\n    atomName: 'Base(Details)',\n    atomStaticKey: 'layoutDetailListBase',\n    atomRevision: 7,\n    description: '',\n    layoutTypeCode: 5,\n    content: JSON.stringify(content),\n    resourceRoles: 'root',\n  };\n  return layout;\n};\n","const layoutDetailListBase = require('./layout/layoutDetailListBase.js');\n\nmodule.exports = app => {\n  const layouts = [\n    //\n    layoutDetailListBase(app),\n  ];\n  return layouts;\n};\n","module.exports = app => {\n  const schemas = {};\n  return schemas;\n};\n","module.exports = app => {\n  const controllers = {};\n  return controllers;\n};\n","const config = require('./config/config.js');\nconst locales = require('./config/locales.js');\nconst errors = require('./config/errors.js');\n\nmodule.exports = app => {\n  // beans\n  const beans = require('./beans.js')(app);\n  // routes\n  const routes = require('./routes.js')(app);\n  // controllers\n  const controllers = require('./controllers.js')(app);\n  // services\n  const services = require('./services.js')(app);\n  // models\n  const models = require('./models.js')(app);\n  // constants\n  const constants = require('./config/constants.js')(app);\n  // meta\n  const meta = require('./meta.js')(app);\n\n  return {\n    beans,\n    routes,\n    controllers,\n    services,\n    models,\n    config,\n    locales,\n    errors,\n    constants,\n    meta,\n  };\n};\n","module.exports = app => {\n  const schemas = require('./config/validation/schemas.js')(app);\n  const staticLayouts = require('./config/static/layouts.js')(app);\n  const meta = {\n    base: {\n      atoms: {},\n      statics: {\n        'a-baselayout.layout': {\n          items: staticLayouts,\n        },\n      },\n    },\n    validation: {\n      validators: {},\n      keywords: {},\n      schemas,\n    },\n  };\n  return meta;\n};\n","module.exports = app => {\n  class Detail extends app.meta.Model {\n    constructor(ctx) {\n      super(ctx, { table: 'aDetailBase', options: { disableDeleted: false } });\n    }\n  }\n\n  return Detail;\n};\n","const detailBase = require('./model/detailBase.js');\n\nmodule.exports = app => {\n  const models = {\n    detailBase,\n  };\n  return models;\n};\n","module.exports = app => {\n  const routes = [];\n  return routes;\n};\n","module.exports = app => {\n  const services = {};\n  return services;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(421);\n",""],"names":[],"sourceRoot":""}