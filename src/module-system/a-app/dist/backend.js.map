{"version":3,"file":"backend.js","mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;;;;ACHA;AACA;AACA,mBAAmB,gCAAgC;AACnD;AACA,uCAAuC,gCAAgC;AACvE;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,eAAe;AACf;;AAEA,iBAAiB,+BAA+B;AAChD;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,iCAAiC;AACpD;AACA,2BAA2B,iCAAiC;AAC5D;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,6CAA6C;AAC/D;AACA,0BAA0B,6CAA6C;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA,mBAAmB,+BAA+B;AAClD;AACA,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,sCAAsC;AAClD,YAAY,mDAAmD;AAC/D,YAAY,iEAAiE;AAC7E,YAAY,oDAAoD;AAChE,YAAY,kEAAkE;AAC9E,YAAY,qDAAqD;AACjE,YAAY,mEAAmE;AAC/E,YAAY,oDAAoD;AAChE,YAAY,kEAAkE;AAC9E,YAAY,wDAAwD;AACpE,YAAY,sEAAsE;AAClF,YAAY,0CAA0C;AACtD,YAAY,0CAA0C;AACtD;AACA,qDAAqD,kCAAkC;AACvF;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;AC7FA,uBAAuB,mBAAO,CAAC,GAA2B;AAC1D,gBAAgB,mBAAO,CAAC,GAAoB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;;;;;;;;ACJA;AACA;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACdA;AACA,WAAW,mBAAO,CAAC,GAAmB;AACtC,WAAW,mBAAO,CAAC,EAAmB;AACtC;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChFA,gBAAgB,mBAAO,CAAC,GAAkB;AAC1C,mBAAmB,mBAAO,CAAC,GAAqB;;AAEhD;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA,kBAAkB;AAClB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzDA,0BAA0B,mBAAO,CAAC,GAA+B;AACjE,0BAA0B,mBAAO,CAAC,GAA+B;AACjE,6BAA6B,mBAAO,CAAC,EAAkC;;AAEvE;AACA;AACA;AACA;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;;;;;;;;ACpGA,kBAAkB,mBAAO,CAAC,GAAiB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;;;;;;;ACbA,iBAAiB,mBAAO,CAAC,GAA0B;AACnD;AACA,wBAAwB;AACxB;AACA;;;;;;;;ACJA,eAAe,mBAAO,CAAC,EAAoB;AAC3C,gBAAgB,mBAAO,CAAC,EAAqB;AAC7C,eAAe,mBAAO,CAAC,GAAoB;;AAE3C;AACA;AACA,eAAe,mBAAO,CAAC,GAAW;AAClC;AACA,gBAAgB,mBAAO,CAAC,GAAY;AACpC;AACA,iBAAiB,mBAAO,CAAC,GAAa;AACtC;AACA,sBAAsB,mBAAO,CAAC,EAAkB;AAChD;AACA,mBAAmB,mBAAO,CAAC,GAAe;AAC1C;AACA,iBAAiB,mBAAO,CAAC,GAAa;AACtC;AACA,eAAe,mBAAO,CAAC,GAAW;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChCA;AACA;AACA,kBAAkB,mBAAO,CAAC,GAAgC;AAC1D;AACA,qBAAqB,mBAAO,CAAC,GAAyB;AACtD,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D,0BAA0B,mBAAO,CAAC,GAA8B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP,kBAAkB;AAClB;AACA,KAAK;AACL;AACA,iBAAiB,oCAAoC;AACrD,KAAK;AACL;AACA;AACA;;;;;;;;ACvEA;AACA;AACA;AACA,mBAAmB,0BAA0B,yBAAyB;AACtE;AACA;AACA;AACA;;;;;;;;ACPA;AACA;AACA;AACA,mBAAmB,iCAAiC,yBAAyB;AAC7E;AACA;AACA;AACA;;;;;;;;ACPA;AACA;AACA;AACA,mBAAmB,kCAAkC,yBAAyB;AAC9E;AACA;AACA;AACA;;;;;;;;ACPA,aAAa,mBAAO,CAAC,GAAgB;AACrC,mBAAmB,mBAAO,CAAC,GAAuB;AAClD,gBAAgB,mBAAO,CAAC,GAAoB;;AAE5C;AACA,mBAAmB;AACnB;AACA;;;;;;;;ACPA;AACA;AACA;AACA,MAAM,+DAA+D;AACrE;AACA;AACA;;;;;;;;ACNA;AACA;AACA,iBAAiB,8BAA8B;AAC/C;AACA,qEAAqE,oCAAoC;AACzG;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACXA,iBAAiB,mBAAO,CAAC,EAAuB;AAChD;AACA,qBAAqB;AACrB;AACA;;;;;;;UCJA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://egg-born-module-a-app/./backend/src/aops.js","webpack://egg-born-module-a-app/./backend/src/bean/atom.app.js","webpack://egg-born-module-a-app/./backend/src/bean/version.manager.js","webpack://egg-born-module-a-app/./backend/src/beans.js","webpack://egg-born-module-a-app/./backend/src/config/config.js","webpack://egg-born-module-a-app/./backend/src/config/errors.js","webpack://egg-born-module-a-app/./backend/src/config/locale/en-us.js","webpack://egg-born-module-a-app/./backend/src/config/locale/zh-cn.js","webpack://egg-born-module-a-app/./backend/src/config/locales.js","webpack://egg-born-module-a-app/./backend/src/config/static/app/appBase.js","webpack://egg-born-module-a-app/./backend/src/config/static/app/appDefault.js","webpack://egg-born-module-a-app/./backend/src/config/static/apps.js","webpack://egg-born-module-a-app/./backend/src/config/static/layout/layoutAppMenuBase.js","webpack://egg-born-module-a-app/./backend/src/config/static/layout/layoutAppMenuDefault.js","webpack://egg-born-module-a-app/./backend/src/config/static/layout/layoutAtomListApp.js","webpack://egg-born-module-a-app/./backend/src/config/static/layouts.js","webpack://egg-born-module-a-app/./backend/src/config/static/resources.js","webpack://egg-born-module-a-app/./backend/src/config/validation/schema/app.js","webpack://egg-born-module-a-app/./backend/src/config/validation/schemas.js","webpack://egg-born-module-a-app/./backend/src/controller/resource.js","webpack://egg-born-module-a-app/./backend/src/controllers.js","webpack://egg-born-module-a-app/./backend/src/main.js","webpack://egg-born-module-a-app/./backend/src/meta.js","webpack://egg-born-module-a-app/./backend/src/model/app.js","webpack://egg-born-module-a-app/./backend/src/model/appContent.js","webpack://egg-born-module-a-app/./backend/src/model/appFull.js","webpack://egg-born-module-a-app/./backend/src/models.js","webpack://egg-born-module-a-app/./backend/src/routes.js","webpack://egg-born-module-a-app/./backend/src/service/resource.js","webpack://egg-born-module-a-app/./backend/src/services.js","webpack://egg-born-module-a-app/webpack/bootstrap","webpack://egg-born-module-a-app/webpack/before-startup","webpack://egg-born-module-a-app/webpack/startup","webpack://egg-born-module-a-app/webpack/after-startup"],"sourcesContent":["module.exports = app => {\n  const aops = {};\n  return aops;\n};\n","module.exports = app => {\n  class Atom extends app.meta.AtomBase {\n    async create({ atomClass, item, options, user }) {\n      // super\n      const key = await super.create({ atomClass, item, options, user });\n      // add app\n      const res = await this.ctx.model.app.insert({\n        atomId: key.atomId,\n      });\n      const itemId = res.insertId;\n      // add content\n      const content = {};\n      await this.ctx.model.appContent.insert({\n        atomId: key.atomId,\n        itemId,\n        content: JSON.stringify(content),\n      });\n      return { atomId: key.atomId, itemId };\n    }\n\n    async read({ atomClass, options, key, user }) {\n      // super\n      const item = await super.read({ atomClass, options, key, user });\n      if (!item) return null;\n      // meta\n      this._getMeta(item);\n      // ok\n      return item;\n    }\n\n    async select({ atomClass, options, items, user }) {\n      // super\n      await super.select({ atomClass, options, items, user });\n      // meta\n      for (const item of items) {\n        this._getMeta(item);\n      }\n    }\n\n    async write({ atomClass, target, key, item, options, user }) {\n      // super\n      await super.write({ atomClass, target, key, item, options, user });\n      // update app\n      const data = await this.ctx.model.app.prepareData(item);\n      await this.ctx.model.app.update(data);\n      // update content\n      await this.ctx.model.appContent.update(\n        {\n          content: item.content,\n        },\n        {\n          where: {\n            atomId: key.atomId,\n          },\n        }\n      );\n    }\n\n    async delete({ atomClass, key, options, user }) {\n      // super\n      await super.delete({ atomClass, key, options, user });\n      // delete app\n      await this.ctx.model.app.delete({\n        id: key.itemId,\n      });\n      // delete content\n      await this.ctx.model.appContent.delete({\n        itemId: key.itemId,\n      });\n    }\n\n    _getMeta(item) {\n      // locale of atomCategoryName\n      item.atomCategoryNameLocale = this.ctx.text(item.atomCategoryName);\n      // meta\n      const meta = this._ensureItemMeta(item);\n      // meta.flags\n      // meta.summary\n      meta.summary = this.ctx.text(item.description);\n    }\n  }\n\n  return Atom;\n};\n","module.exports = app => {\n  class Version extends app.meta.BeanBase {\n    async update(options) {\n      if (options.version === 1) {\n        // create table: aApp\n        let sql = `\n          CREATE TABLE aApp (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n            deleted int(11) DEFAULT '0',\n            iid int(11) DEFAULT '0',\n            atomId int(11) DEFAULT '0',\n            description varchar(255) DEFAULT NULL,\n            appSorting int(11) DEFAULT '0',\n            appIcon varchar(255) DEFAULT NULL,\n            appIsolate int(11) DEFAULT '0',\n            appLanguage int(11) DEFAULT '0',\n            appCms int(11) DEFAULT '0',\n            PRIMARY KEY (id)\n          )\n        `;\n        await this.ctx.model.query(sql);\n\n        // create table: aAppContent\n        sql = `\n          CREATE TABLE aAppContent (\n            id int(11) NOT NULL AUTO_INCREMENT,\n            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n            deleted int(11) DEFAULT '0',\n            iid int(11) DEFAULT '0',\n            atomId int(11) DEFAULT '0',\n            itemId int(11) DEFAULT '0',\n            content JSON DEFAULT NULL,\n            PRIMARY KEY (id)\n          )\n        `;\n        await this.ctx.model.query(sql);\n\n        // create view: aAppViewFull\n        sql = `\n          CREATE VIEW aAppViewFull as\n            select a.*,b.content from aApp a\n              left join aAppContent b on a.id=b.itemId\n        `;\n        await this.ctx.model.query(sql);\n      }\n\n      if (options.version === 2) {\n        let sql = `\n          ALTER TABLE aApp\n            ADD COLUMN appHidden int(11) DEFAULT '0'\n        `;\n        await this.ctx.model.query(sql);\n\n        // alter view: aAppViewFull\n        await this.ctx.model.query('drop view aAppViewFull');\n        sql = `\n          CREATE VIEW aAppViewFull as\n            select a.*,b.content from aApp a\n              left join aAppContent b on a.id=b.itemId\n        `;\n        await this.ctx.model.query(sql);\n      }\n    }\n\n    async init(options) {\n      if (options.version === 1) {\n        // app: add role rights\n        const roleRights = [\n          { roleName: 'system', action: 'create' },\n          { roleName: 'system', action: 'read', scopeNames: 0 },\n          { roleName: 'system', action: 'read', scopeNames: 'authenticated' },\n          { roleName: 'system', action: 'write', scopeNames: 0 },\n          { roleName: 'system', action: 'write', scopeNames: 'authenticated' },\n          { roleName: 'system', action: 'delete', scopeNames: 0 },\n          { roleName: 'system', action: 'delete', scopeNames: 'authenticated' },\n          { roleName: 'system', action: 'clone', scopeNames: 0 },\n          { roleName: 'system', action: 'clone', scopeNames: 'authenticated' },\n          { roleName: 'system', action: 'authorize', scopeNames: 0 },\n          { roleName: 'system', action: 'authorize', scopeNames: 'authenticated' },\n          { roleName: 'system', action: 'deleteBulk' },\n          { roleName: 'system', action: 'exportBulk' },\n        ];\n        await this.ctx.bean.role.addRoleRightBatch({ atomClassName: 'app', roleRights });\n      }\n    }\n\n    async test() {}\n  }\n\n  return Version;\n};\n","const versionManager = require('./bean/version.manager.js');\nconst atomApp = require('./bean/atom.app.js');\n\nmodule.exports = app => {\n  const beans = {\n    // version\n    'version.manager': {\n      mode: 'app',\n      bean: versionManager,\n    },\n    // atom\n    'atom.app': {\n      mode: 'app',\n      bean: atomApp,\n    },\n  };\n  return beans;\n};\n","// eslint-disable-next-line\nmodule.exports = appInfo => {\n  const config = {};\n  return config;\n};\n","// error code should start from 1001\nmodule.exports = {};\n","module.exports = {\n  AppMenu: 'App Menu',\n  AppHome: 'App Home',\n  AppCategoryFront: 'Front Apps',\n  AppCategoryBackend: 'Backend Apps',\n  AppCategoryManagement: 'Management',\n  AppCategoryServices: 'Services',\n  AppCategoryCMS: 'CMS',\n  AppCategoryBusiness: 'Business',\n};\n","module.exports = {\n  App: '应用',\n  Apps: '应用',\n  'Create App': '新建应用',\n  'App List': '应用列表',\n  AppMenu: '应用菜单',\n  AppHome: '应用首页',\n  Icon: '图标',\n  AppCategoryFront: '前台应用',\n  AppCategoryBackend: '后台应用',\n  AppCategoryManagement: '管理',\n  AppCategoryServices: '服务',\n  AppCategoryCMS: 'CMS',\n  AppCategoryBusiness: '业务',\n};\n","module.exports = {\n  'en-us': require('./locale/en-us.js'),\n  'zh-cn': require('./locale/zh-cn.js'),\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const content = {\n    presets: {\n      anonymous: {\n        mobile: {\n          layout: null,\n          menu: {\n            layout: null,\n          },\n          home: {\n            mode: null,\n            dashboard: null,\n            page: null,\n          },\n          mine: {\n            layout: null,\n          },\n        },\n        pc: {\n          layout: null,\n          menu: {\n            layout: null,\n          },\n          home: {\n            mode: null,\n            dashboard: null,\n            page: null,\n          },\n          mine: {\n            layout: null,\n          },\n        },\n      },\n      authenticated: {\n        mobile: {\n          layout: null,\n          menu: {\n            layout: null,\n          },\n          home: {\n            mode: null,\n            dashboard: null,\n            page: null,\n          },\n          mine: {\n            layout: null,\n          },\n        },\n        pc: {\n          layout: null,\n          menu: {\n            layout: null,\n          },\n          home: {\n            mode: null,\n            dashboard: null,\n            page: null,\n          },\n          mine: {\n            layout: null,\n          },\n        },\n      },\n    },\n  };\n  const _app = {\n    atomName: 'Base',\n    atomStaticKey: 'appBase',\n    atomRevision: 1,\n    atomCategoryId: 0,\n    description: '',\n    appIcon: ':outline:apps-outline',\n    appIsolate: true,\n    appHidden: 1,\n    content: JSON.stringify(content),\n    resourceRoles: 'root',\n    appSorting: 0,\n  };\n  return _app;\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const content = {\n    presets: {\n      anonymous: {\n        mobile: {\n          layout: 'a-layoutmobile:layoutMobileAnonymous',\n          menu: {\n            layout: 'a-app:layoutAppMenuDefault',\n          },\n          home: {\n            mode: 'dashboard', // dashboard,page\n            dashboard: 'a-dashboard:dashboardAnonymous',\n            page: null,\n          },\n          mine: {\n            layout: true,\n          },\n        },\n        pc: {\n          layout: 'a-layoutpc:layoutPCAnonymous',\n          menu: {\n            layout: 'a-app:layoutAppMenuDefault',\n          },\n          home: {\n            mode: 'dashboard', // dashboard,page\n            dashboard: 'a-dashboard:dashboardAnonymous',\n            page: null,\n          },\n          mine: {\n            layout: true,\n          },\n        },\n      },\n      authenticated: {\n        mobile: {\n          layout: 'a-layoutmobile:layoutMobile',\n          menu: {\n            layout: 'a-app:layoutAppMenuDefault',\n          },\n          home: {\n            mode: 'dashboard', // dashboard,page\n            dashboard: 'a-dashboard:dashboardHome',\n            page: null,\n          },\n          mine: {\n            layout: true,\n          },\n        },\n        pc: {\n          layout: 'a-layoutpc:layoutPC',\n          menu: {\n            layout: 'a-app:layoutAppMenuDefault',\n          },\n          home: {\n            mode: 'dashboard', // dashboard,page\n            dashboard: 'a-dashboard:dashboardHome',\n            page: null,\n          },\n          mine: {\n            layout: true,\n          },\n        },\n      },\n    },\n  };\n  const _app = {\n    atomName: 'Default',\n    atomStaticKey: 'appDefault',\n    atomRevision: 3,\n    atomCategoryId: 0,\n    description: '',\n    appIcon: ':outline:apps-outline',\n    appIsolate: true,\n    appHidden: 1,\n    content: JSON.stringify(content),\n    resourceRoles: 'root',\n    appSorting: 0,\n  };\n  return _app;\n};\n","const appBase = require('./app/appBase.js');\nconst appDefault = require('./app/appDefault.js');\n\nmodule.exports = app => {\n  const apps = [appBase(app), appDefault(app)];\n  return apps;\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const content = {\n    info: {\n      layout: {\n        viewSize: {\n          small: 'list',\n          medium: 'list',\n          large: 'list',\n        },\n      },\n    },\n    layouts: {\n      base: {\n        blocks: {\n          title: {\n            component: {\n              module: 'a-baselayout',\n              name: 'baseLayoutBlockListTitle',\n            },\n          },\n        },\n      },\n      list: {\n        providerOptions: {\n          providerName: 'all',\n          autoInit: true,\n        },\n        subnavbar: false,\n        blocks: {\n          items: {\n            component: {\n              module: 'a-app',\n              name: 'appMenuLayoutBlockListItems',\n            },\n          },\n        },\n      },\n    },\n  };\n  const layout = {\n    atomName: 'Base',\n    atomStaticKey: 'layoutAppMenuBase',\n    atomRevision: 4,\n    description: '',\n    layoutTypeCode: 13,\n    content: JSON.stringify(content),\n    resourceRoles: 'root',\n  };\n  return layout;\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const content = {\n    info: {\n      layout: {\n        viewSize: {\n          small: 'boxGrid9',\n          medium: 'boxGrid9',\n          large: 'boxGrid9',\n        },\n      },\n    },\n    layouts: {\n      base: {\n        blocks: {},\n      },\n      boxGrid9: {\n        title: 'LayoutBoxGrid9',\n        component: {\n          module: 'a-baselayout',\n          name: 'baseLayoutList',\n        },\n        providerOptions: {\n          providerName: 'all',\n          autoInit: true,\n        },\n        blocks: {\n          items: {\n            component: {\n              module: 'a-app',\n              name: 'appListLayoutBlockBoxGrid9Items',\n            },\n          },\n        },\n      },\n    },\n  };\n  const layout = {\n    atomName: 'Default',\n    atomStaticKey: 'layoutAppMenuDefault',\n    atomRevision: 2,\n    description: '',\n    layoutTypeCode: 13,\n    content: JSON.stringify(content),\n    resourceRoles: 'root',\n  };\n  return layout;\n};\n","module.exports = app => {\n  // const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const content = {\n    layouts: {\n      table: {\n        blocks: {\n          items: {\n            columns: [\n              {\n                dataIndex: 'atomName',\n                title: 'Atom Name',\n                align: 'left',\n                component: {\n                  module: 'a-baselayout',\n                  name: 'listLayoutTableCellAtomName',\n                },\n              },\n              {\n                dataIndex: 'description',\n                title: 'Description',\n                align: 'left',\n              },\n              {\n                dataIndex: 'userName',\n                title: 'Creator',\n                align: 'left',\n                component: {\n                  module: 'a-baselayout',\n                  name: 'listLayoutTableCellUserName',\n                },\n              },\n              {\n                dataIndex: 'atomCreatedAt',\n                title: 'Created Time',\n                align: 'left',\n              },\n              {\n                dataIndex: 'atomUpdatedAt',\n                title: 'Modification Time',\n                align: 'left',\n              },\n            ],\n          },\n        },\n      },\n    },\n  };\n  const layout = {\n    atomName: 'App',\n    atomStaticKey: 'layoutAtomListApp',\n    atomRevision: 0,\n    description: '',\n    layoutTypeCode: 3,\n    content: JSON.stringify(content),\n    resourceRoles: 'root',\n  };\n  return layout;\n};\n","const layoutAtomListApp = require('./layout/layoutAtomListApp.js');\nconst layoutAppMenuBase = require('./layout/layoutAppMenuBase.js');\nconst layoutAppMenuDefault = require('./layout/layoutAppMenuDefault.js');\n\nmodule.exports = app => {\n  const layouts = [layoutAtomListApp(app), layoutAppMenuBase(app), layoutAppMenuDefault(app)];\n  return layouts;\n};\n","module.exports = app => {\n  const moduleInfo = app.meta.mockUtil.parseInfoFromPackage(__dirname);\n  const resources = [\n    // menu\n    {\n      atomName: 'Create App',\n      atomStaticKey: 'createApp',\n      atomRevision: -1,\n      atomCategoryId: 'a-base:menu.BasicProfile',\n      resourceType: 'a-base:menu',\n      resourceConfig: JSON.stringify({\n        module: moduleInfo.relativeName,\n        atomClassName: 'app',\n        atomAction: 'create',\n      }),\n      resourceIcon: ':outline:apps-outline',\n      appKey: 'a-appbooster:appSystem',\n      resourceRoles: 'template.system',\n    },\n    {\n      atomName: 'Apps',\n      atomStaticKey: 'listApp',\n      atomRevision: 3,\n      atomCategoryId: 'a-base:menu.BasicProfile',\n      resourceType: 'a-base:menu',\n      resourceConfig: JSON.stringify({\n        module: moduleInfo.relativeName,\n        atomClassName: 'app',\n        atomAction: 'read',\n      }),\n      resourceIcon: ':outline:apps-outline',\n      appKey: 'a-appbooster:appSystem',\n      resourceRoles: 'template.system',\n    },\n  ];\n  return resources;\n};\n","module.exports = app => {\n  const schemas = {};\n  // app\n  schemas.app = {\n    type: 'object',\n    properties: {\n      // title\n      __groupTitle: {\n        ebType: 'group-flatten',\n        ebTitle: 'Title',\n      },\n      atomName: {\n        type: 'string',\n        ebType: 'text',\n        ebTitle: 'Name',\n        notEmpty: true,\n      },\n      description: {\n        type: 'string',\n        ebType: 'text',\n        ebTitle: 'Description',\n      },\n      // config\n      __groupConfig: {\n        ebType: 'group-flatten',\n        ebTitle: 'Config',\n      },\n      content: {\n        type: 'string',\n        ebType: 'json',\n        ebTitle: 'Content',\n        notEmpty: true,\n      },\n      // Basic Info\n      __groupBasicInfo: {\n        ebType: 'group-flatten',\n        ebTitle: 'Basic Info',\n      },\n      atomCategoryId: {\n        type: 'number',\n        ebType: 'category',\n        ebTitle: 'Category',\n      },\n      appIcon: {\n        type: 'string',\n        ebType: 'text',\n        ebTitle: 'Icon',\n        notEmpty: true,\n      },\n      appIsolate: {\n        type: 'number',\n        ebType: 'toggle',\n        ebTitle: 'AppIsolateTitle',\n      },\n      appHidden: {\n        type: 'number',\n        ebType: 'toggle',\n        ebTitle: 'AppHiddenTitle',\n      },\n      appLanguage: {\n        type: 'number',\n        ebType: 'toggle',\n        ebTitle: 'AppLanguageTitle',\n      },\n      appCms: {\n        type: 'number',\n        ebType: 'toggle',\n        ebTitle: 'AppCmsTitle',\n      },\n      // Extra\n      __groupExtra: {\n        ebType: 'group-flatten',\n        ebTitle: 'Extra',\n      },\n      appSorting: {\n        type: 'number',\n        ebType: 'text',\n        ebTitle: 'Sorting',\n      },\n      atomStaticKey: {\n        type: 'string',\n        ebType: 'text',\n        ebTitle: 'KeyForAtom',\n        ebReadOnly: true,\n        notEmpty: true,\n      },\n    },\n  };\n  // app search\n  schemas.appSearch = {\n    type: 'object',\n    properties: {\n      description: {\n        type: 'string',\n        ebType: 'text',\n        ebTitle: 'Description',\n      },\n    },\n  };\n  return schemas;\n};\n","const schemaApp = require('./schema/app.js');\n\nmodule.exports = app => {\n  const schemas = {};\n  // app\n  Object.assign(schemas, schemaApp(app));\n  // ok\n  return schemas;\n};\n","module.exports = app => {\n  class ResourceController extends app.Controller {\n    async read() {\n      const res = await this.ctx.service.resource.read({\n        atomStaticKey: this.ctx.request.body.atomStaticKey,\n        options: this.ctx.request.body.options,\n        user: this.ctx.state.user.op,\n      });\n      this.ctx.success(res);\n    }\n  }\n\n  return ResourceController;\n};\n","const resource = require('./controller/resource.js');\nmodule.exports = app => {\n  const controllers = { resource };\n  return controllers;\n};\n","const config = require('./config/config.js');\nconst locales = require('./config/locales.js');\nconst errors = require('./config/errors.js');\n\nmodule.exports = app => {\n  // aops\n  const aops = require('./aops.js')(app);\n  // beans\n  const beans = require('./beans.js')(app);\n  // routes\n  const routes = require('./routes.js')(app);\n  // controllers\n  const controllers = require('./controllers.js')(app);\n  // services\n  const services = require('./services.js')(app);\n  // models\n  const models = require('./models.js')(app);\n  // meta\n  const meta = require('./meta.js')(app);\n\n  return {\n    aops,\n    beans,\n    routes,\n    controllers,\n    services,\n    models,\n    config,\n    locales,\n    errors,\n    meta,\n  };\n};\n","module.exports = app => {\n  // schemas\n  const schemas = require('./config/validation/schemas.js')(app);\n  // static\n  const staticApps = require('./config/static/apps.js')(app);\n  const staticLayouts = require('./config/static/layouts.js')(app);\n  const staticResources = require('./config/static/resources.js')(app);\n  const meta = {\n    base: {\n      atoms: {\n        app: {\n          info: {\n            bean: 'app',\n            title: 'App',\n            tableName: 'aApp',\n            tableNameModes: {\n              full: 'aAppViewFull',\n            },\n            inner: true,\n            resource: true,\n            language: false,\n            category: true,\n            tag: false,\n            comment: false,\n            attachment: false,\n            layout: {\n              config: {\n                atomList: 'layoutAtomListApp',\n              },\n            },\n          },\n          actions: {\n            write: {\n              enableOnStatic: true,\n            },\n          },\n          validator: 'app',\n          search: {\n            validator: 'appSearch',\n          },\n        },\n      },\n      statics: {\n        'a-app.app': {\n          items: staticApps,\n        },\n        'a-baselayout.layout': {\n          items: staticLayouts,\n        },\n        'a-base.resource': {\n          items: staticResources,\n        },\n      },\n    },\n    validation: {\n      validators: {\n        app: {\n          schemas: 'app',\n        },\n        appSearch: {\n          schemas: 'appSearch',\n        },\n      },\n      keywords: {},\n      schemas,\n    },\n    index: {\n      indexes: { aApp: 'createdAt,updatedAt,atomId' },\n    },\n  };\n  return meta;\n};\n","module.exports = app => {\n  class App extends app.meta.Model {\n    constructor(ctx) {\n      super(ctx, { table: 'aApp', options: { disableDeleted: false } });\n    }\n  }\n  return App;\n};\n","module.exports = app => {\n  class AppContent extends app.meta.Model {\n    constructor(ctx) {\n      super(ctx, { table: 'aAppContent', options: { disableDeleted: false } });\n    }\n  }\n  return AppContent;\n};\n","module.exports = app => {\n  class AppFull extends app.meta.Model {\n    constructor(ctx) {\n      super(ctx, { table: 'aAppViewFull', options: { disableDeleted: false } });\n    }\n  }\n  return AppFull;\n};\n","const _app = require('./model/app.js');\nconst appContent = require('./model/appContent.js');\nconst appFull = require('./model/appFull.js');\n\nmodule.exports = app => {\n  const models = { app: _app, appContent, appFull };\n  return models;\n};\n","module.exports = app => {\n  const routes = [\n    // resource\n    { method: 'post', path: 'resource/read', controller: 'resource' },\n  ];\n  return routes;\n};\n","module.exports = app => {\n  class Resource extends app.Service {\n    async read({ atomStaticKey, options, user }) {\n      // donot check user access right, but must check atomClass\n      const appItem = await this.ctx.bean.resource.readByStaticKey({ atomStaticKey, options /* , user*/ });\n      if (appItem.module !== 'a-app' || appItem.atomClassName !== 'app') this.ctx.throw(403);\n      return appItem;\n    }\n  }\n\n  return Resource;\n};\n","const resource = require('./service/resource.js');\nmodule.exports = app => {\n  const services = { resource };\n  return services;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(421);\n",""],"names":[],"sourceRoot":""}