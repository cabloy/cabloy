{"version":3,"sources":["webpack://front/webpack/bootstrap","webpack://front/./front/src/pages/file/upload.vue?c155","webpack://front//Users/wind/Documents/data/cabloy/egg-born-demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://front/external \"vue\"","webpack://front/./front/src/main.js","webpack://front//Users/wind/Documents/data/cabloy/egg-born-demo/node_modules/cropperjs/dist/cropper.css","webpack://front/./front/src/assets/css/module.less","webpack://front/./front/src/routes.js","webpack://front/./front/src/pages sync ^\\.\\/.*\\.vue$","webpack://front/./front/src/pages/file/upload.vue?80f2","webpack://front/./front/src/store.js","webpack://front/./front/src/config/config.js","webpack://front/./front/src/config/locales.js","webpack://front/./front/src/config/locale/zh-cn.js","webpack://front/./front/src/components.js","webpack://front/./front/src/pages/file/upload.vue?a64b","webpack://front//Users/wind/Documents/data/cabloy/egg-born-demo/node_modules/cropperjs/dist/cropper.esm.js","webpack://front/front/src/pages/file/upload.vue","webpack://front/./front/src/pages/file/upload.vue?1f9d","webpack://front/./front/src/pages/file/upload.vue","webpack://front/./front/src/pages/file/test.vue?a50e","webpack://front/front/src/pages/file/test.vue","webpack://front/./front/src/pages/file/test.vue?f45f","webpack://front/./front/src/pages/file/test.vue"],"names":["Vue","install","_Vue","cb","console","error","routes","require","default","store","config","locales","components","load","name","path","component","state","getters","mutations","actions","Upload","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","arr2","iter","toString","call","from","IN_BROWSER","window","WINDOW","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_POINTER_DOWN","PointerEvent","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","DEFAULTS","viewMode","dragMode","initialAspectRatio","NaN","aspectRatio","data","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","ready","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNaN","Number","isNumber","value","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","e","isFunction","forEach","callback","keys","assign","_len","arguments","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","undefined","test","Math","round","REGEXP_SUFFIX","setStyle","element","styles","style","property","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","apply","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","document","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","documentElement","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","push","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","isFinite","getAdjustedSizes","_ref4","height","width","isValidNumber","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","Infinity","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","createElement","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","fromCharCode","String","getStringFromCharCode","dataView","start","str","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","DataView","orientation","littleEndian","app1Start","ifdStart","byteLength","offset","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_length","_offset","setUint16","parseOrientation","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","oldLeft","oldTop","limited","limitCanvas","initialImageData","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOrigin","crossOriginUrl","src","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","querySelector","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","events","bind","onCropStart","cropStart","onWheel","wheel","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","getCanvasData","getCropBoxData","setCanvasData","n","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","p","methods","reset","clear","hasSameSize","isImg","replaced","uncreate","enable","disable","destroy","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","rotateTo","_scaleX","_scaleY","getData$$1","rounded","setData$$1","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","source","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","sourceWidth","sourceHeight","srcX","srcY","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","setAspectRatio","mode","croppable","AnotherCropper","Cropper","tagName","Error","reloading","sizing","init","toDataURL","clone","read","xhr","XMLHttpRequest","ontimeout","onabort","onerror","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","_this2","IS_SAFARI","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","noConflict","setDefaults"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;AClFA,uC;;;;;;;ACAA;AAAA;;AAEA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;AC5FA,gC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAIA,GAAJ;AAEA;AACA;;AAGA,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,EAAvB,EAA2B;AACzB,MAAIH,GAAJ,EAAS,OAAOI,OAAO,CAACC,KAAR,CAAc,oBAAd,CAAP;AAETL,KAAG,GAAGE,IAAN;AAEA,SAAOC,EAAE,CAAC;AACRG,UAAM,E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","file":"front.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","// extracted by mini-css-extract-plugin","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","module.exports = require(\"vue\");","let Vue;\n\nimport 'cropperjs/dist/cropper.css';\nimport './assets/css/module.less';\n\n// install\nfunction install(_Vue, cb) {\n  if (Vue) return console.error('already installed.');\n\n  Vue = _Vue;\n\n  return cb({\n    routes: require('./routes.js').default,\n    store: require('./store.js').default(Vue),\n    config: require('./config/config.js').default,\n    locales: require('./config/locales.js').default,\n    components: require('./components.js').default,\n  });\n}\n\n// export\nexport default {\n  install,\n};\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","function load(name) {\n  return require(`./pages/${name}.vue`).default;\n}\n\nexport default [\n  { path: 'file/upload', component: load('file/upload') },\n  { path: 'file/test', component: load('file/test') },\n];\n","var map = {\n\t\"./file/test.vue\": 15,\n\t\"./file/upload.vue\": 14\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 7;","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/index.js??ref--9-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js??ref--9-2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&id=a3a708f2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/index.js??ref--9-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js??ref--9-2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&id=a3a708f2&lang=less&scoped=true&\"","// eslint-disable-next-line\nexport default function(Vue) {\n\n  return {\n    state: {\n    },\n    getters: {\n    },\n    mutations: {\n    },\n    actions: {\n    },\n  };\n\n}\n","export default {\n};\n","export default{\n  'zh-cn': require('./locale/zh-cn.js').default,\n};\n","export default {\n  'Clear Crop': '',\n  'Select Image': '',\n  'Select File': '',\n  'Select Audio': '',\n  'Upload Image': '',\n  'Upload File': '',\n  'Upload Audio': '',\n  Upload: '',\n};\n","export default {\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('eb-page',[_c('eb-navbar',{attrs:{\"title\":_vm.title,\"eb-back-link\":\"Back\"}}),_vm._v(\" \"),_c('eb-box',{ref:\"box\",on:{\"size\":_vm.onSize}},[_c('img',{ref:\"image\",staticClass:\"image\"})]),_vm._v(\" \"),_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.accept},on:{\"change\":_vm.onFileChange}}),_vm._v(\" \"),_c('f7-block',[_c('h3',[_vm._v(_vm._s(_vm.fileName))])]),_vm._v(\" \"),_c('f7-toolbar',{attrs:{\"bottom-md\":\"\"}},[_c('f7-button',{on:{\"click\":_vm.onClickSelect}},[_vm._v(_vm._s(_vm.selectText))]),_vm._v(\" \"),(_vm.cropped)?_c('f7-button',{on:{\"click\":_vm.onClickClearCrop}},[_vm._v(_vm._s(_vm.$text('Clear Crop')))]):_vm._e(),_vm._v(\" \"),(_vm.fileName)?_c('eb-button',{attrs:{\"active\":\"\",\"onPerform\":_vm.onPerformUpload}},[_vm._v(_vm._s(_vm.$text('Upload')))]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\n * Cropper.js v1.4.3\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2018-10-24T13:07:15.032Z\n */\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar IN_BROWSER = typeof window !== 'undefined';\nvar WINDOW = IN_BROWSER ? window : {};\nvar NAMESPACE = 'cropper'; // Actions\n\nvar ACTION_ALL = 'all';\nvar ACTION_CROP = 'crop';\nvar ACTION_MOVE = 'move';\nvar ACTION_ZOOM = 'zoom';\nvar ACTION_EAST = 'e';\nvar ACTION_WEST = 'w';\nvar ACTION_SOUTH = 's';\nvar ACTION_NORTH = 'n';\nvar ACTION_NORTH_EAST = 'ne';\nvar ACTION_NORTH_WEST = 'nw';\nvar ACTION_SOUTH_EAST = 'se';\nvar ACTION_SOUTH_WEST = 'sw'; // Classes\n\nvar CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\nvar CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\nvar CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\nvar CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\nvar CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\nvar CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\nvar CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\nvar DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\nvar DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\nvar DRAG_MODE_CROP = 'crop';\nvar DRAG_MODE_MOVE = 'move';\nvar DRAG_MODE_NONE = 'none'; // Events\n\nvar EVENT_CROP = 'crop';\nvar EVENT_CROP_END = 'cropend';\nvar EVENT_CROP_MOVE = 'cropmove';\nvar EVENT_CROP_START = 'cropstart';\nvar EVENT_DBLCLICK = 'dblclick';\nvar EVENT_POINTER_DOWN = WINDOW.PointerEvent ? 'pointerdown' : 'touchstart mousedown';\nvar EVENT_POINTER_MOVE = WINDOW.PointerEvent ? 'pointermove' : 'touchmove mousemove';\nvar EVENT_POINTER_UP = WINDOW.PointerEvent ? 'pointerup pointercancel' : 'touchend touchcancel mouseup';\nvar EVENT_READY = 'ready';\nvar EVENT_RESIZE = 'resize';\nvar EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\nvar EVENT_ZOOM = 'zoom'; // Mime types\n\nvar MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\nvar REGEXP_ACTIONS = /^(?:e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;\nvar REGEXP_DATA_URL = /^data:/;\nvar REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\nvar REGEXP_TAG_NAME = /^(?:img|canvas)$/i;\n\nvar DEFAULTS = {\n  // Define the view mode of the cropper\n  viewMode: 0,\n  // 0, 1, 2, 3\n  // Define the dragging mode of the cropper\n  dragMode: DRAG_MODE_CROP,\n  // 'crop', 'move' or 'none'\n  // Define the initial aspect ratio of the crop box\n  initialAspectRatio: NaN,\n  // Define the aspect ratio of the crop box\n  aspectRatio: NaN,\n  // An object with the previous cropping result data\n  data: null,\n  // A selector for adding extra containers to preview\n  preview: '',\n  // Re-render the cropper when resize the window\n  responsive: true,\n  // Restore the cropped area after resize the window\n  restore: true,\n  // Check if the current image is a cross-origin image\n  checkCrossOrigin: true,\n  // Check the current image's Exif Orientation information\n  checkOrientation: true,\n  // Show the black modal\n  modal: true,\n  // Show the dashed lines for guiding\n  guides: true,\n  // Show the center indicator for guiding\n  center: true,\n  // Show the white modal to highlight the crop box\n  highlight: true,\n  // Show the grid background\n  background: true,\n  // Enable to crop the image automatically when initialize\n  autoCrop: true,\n  // Define the percentage of automatic cropping area when initializes\n  autoCropArea: 0.8,\n  // Enable to move the image\n  movable: true,\n  // Enable to rotate the image\n  rotatable: true,\n  // Enable to scale the image\n  scalable: true,\n  // Enable to zoom the image\n  zoomable: true,\n  // Enable to zoom the image by dragging touch\n  zoomOnTouch: true,\n  // Enable to zoom the image by wheeling mouse\n  zoomOnWheel: true,\n  // Define zoom ratio when zoom the image by wheeling mouse\n  wheelZoomRatio: 0.1,\n  // Enable to move the crop box\n  cropBoxMovable: true,\n  // Enable to resize the crop box\n  cropBoxResizable: true,\n  // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n  toggleDragModeOnDblclick: true,\n  // Size limitation\n  minCanvasWidth: 0,\n  minCanvasHeight: 0,\n  minCropBoxWidth: 0,\n  minCropBoxHeight: 0,\n  minContainerWidth: 200,\n  minContainerHeight: 100,\n  // Shortcuts of events\n  ready: null,\n  cropstart: null,\n  cropmove: null,\n  cropend: null,\n  crop: null,\n  zoom: null\n};\n\nvar TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n/**\n * Check if the given value is not a number.\n */\n\nvar isNaN = Number.isNaN || WINDOW.isNaN;\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\n\nfunction isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\n\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\n\nfunction isObject(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\n\nfunction isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    var _constructor = value.constructor;\n    var prototype = _constructor.prototype;\n    return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\n\nfunction forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)\n    /* array-like */\n    ) {\n        var length = data.length;\n        var i;\n\n        for (i = 0; i < length; i += 1) {\n          if (callback.call(data, data[i], i, data) === false) {\n            break;\n          }\n        }\n      } else if (isObject(data)) {\n      Object.keys(data).forEach(function (key) {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\n\nvar assign = Object.assign || function assign(obj) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (isObject(obj) && args.length > 0) {\n    args.forEach(function (arg) {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach(function (key) {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n};\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n/**\n * Normalize decimal number.\n * Check out {@link http://0.30000000000000004.com/}\n * @param {number} value - The value to normalize.\n * @param {number} [times=100000000000] - The times for normalizing.\n * @returns {number} Returns the normalized number.\n */\n\nfunction normalizeDecimalNumber(value) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n}\nvar REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\n\nfunction setStyle(element, styles) {\n  var style = element.style;\n  forEach(styles, function (value, property) {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\n\nfunction hasClass(element, value) {\n  return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n}\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\n\nfunction addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  var className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = \"\".concat(className, \" \").concat(value);\n  }\n}\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\n\nfunction removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\n\nfunction toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      toggleClass(elem, value, added);\n    });\n    return;\n  } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\nvar REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\n\nfunction hyphenate(value) {\n  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\n\nfunction getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  }\n\n  if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(\"data-\".concat(hyphenate(name)));\n}\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\n\nfunction setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n  }\n}\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\n\nfunction removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (e) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (e) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute(\"data-\".concat(hyphenate(name)));\n  }\n}\nvar REGEXP_SPACES = /\\s\\s*/;\n\nvar onceSupported = function () {\n  var supported = false;\n\n  if (IN_BROWSER) {\n    var once = false;\n\n    var listener = function listener() {};\n\n    var options = Object.defineProperty({}, 'once', {\n      get: function get() {\n        supported = true;\n        return once;\n      },\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set: function set(value) {\n        once = value;\n      }\n    });\n    WINDOW.addEventListener('test', listener, options);\n    WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n}();\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\n\n\nfunction removeListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var handler = listener;\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (!onceSupported) {\n      var listeners = element.listeners;\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\n\nfunction addListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _handler = listener;\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (options.once && !onceSupported) {\n      var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n      _handler = function handler() {\n        delete listeners[event][listener];\n        element.removeEventListener(event, _handler, options);\n\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = _handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, _handler, options);\n  });\n}\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\n\nfunction dispatchEvent(element, type, data) {\n  var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      detail: data,\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\n\nfunction getOffset(element) {\n  var box = element.getBoundingClientRect();\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n  };\n}\nvar location = WINDOW.location;\nvar REGEXP_ORIGINS = /^(https?:)\\/\\/([^:/?#]+):?(\\d*)/i;\n/**\n * Check if the given URL is a cross origin URL.\n * @param {string} url - The target URL.\n * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n */\n\nfunction isCrossOriginURL(url) {\n  var parts = url.match(REGEXP_ORIGINS);\n  return parts && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n}\n/**\n * Add timestamp to the given URL.\n * @param {string} url - The target URL.\n * @returns {string} The result URL.\n */\n\nfunction addTimestamp(url) {\n  var timestamp = \"timestamp=\".concat(new Date().getTime());\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n}\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\n\nfunction getTransforms(_ref) {\n  var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n  var values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push(\"translateX(\".concat(translateX, \"px)\"));\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push(\"translateY(\".concat(translateY, \"px)\"));\n  } // Rotate should come first before scale to match orientation transform\n\n\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(\"rotate(\".concat(rotate, \"deg)\"));\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(\"scaleX(\".concat(scaleX, \")\"));\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(\"scaleY(\".concat(scaleY, \")\"));\n  }\n\n  var transform = values.length ? values.join(' ') : 'none';\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform: transform\n  };\n}\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\n\nfunction getMaxZoomRatio(pointers) {\n  var pointers2 = assign({}, pointers);\n  var ratios = [];\n  forEach(pointers, function (pointer, pointerId) {\n    delete pointers2[pointerId];\n    forEach(pointers2, function (pointer2) {\n      var x1 = Math.abs(pointer.startX - pointer2.startX);\n      var y1 = Math.abs(pointer.startY - pointer2.startY);\n      var x2 = Math.abs(pointer.endX - pointer2.endX);\n      var y2 = Math.abs(pointer.endY - pointer2.endY);\n      var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n      var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n      var ratio = (z2 - z1) / z1;\n      ratios.push(ratio);\n    });\n  });\n  ratios.sort(function (a, b) {\n    return Math.abs(a) < Math.abs(b);\n  });\n  return ratios[0];\n}\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\n\nfunction getPointer(_ref2, endOnly) {\n  var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n  var end = {\n    endX: pageX,\n    endY: pageY\n  };\n  return endOnly ? end : assign({\n    startX: pageX,\n    startY: pageY\n  }, end);\n}\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\n\nfunction getPointersCenter(pointers) {\n  var pageX = 0;\n  var pageY = 0;\n  var count = 0;\n  forEach(pointers, function (_ref3) {\n    var startX = _ref3.startX,\n        startY = _ref3.startY;\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n  pageX /= count;\n  pageY /= count;\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n/**\n * Check if the given value is a finite number.\n */\n\nvar isFinite = Number.isFinite || WINDOW.isFinite;\n/**\n * Get the max sizes in a rectangle under the given aspect ratio.\n * @param {Object} data - The original sizes.\n * @param {string} [type='contain'] - The adjust type.\n * @returns {Object} The result sizes.\n */\n\nfunction getAdjustedSizes(_ref4) // or 'cover'\n{\n  var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n\n  var isValidNumber = function isValidNumber(value) {\n    return isFinite(value) && value > 0;\n  };\n\n  if (isValidNumber(width) && isValidNumber(height)) {\n    var adjustedWidth = height * aspectRatio;\n\n    if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n      height = width / aspectRatio;\n    } else {\n      width = height * aspectRatio;\n    }\n  } else if (isValidNumber(width)) {\n    height = width / aspectRatio;\n  } else if (isValidNumber(height)) {\n    width = height * aspectRatio;\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n/**\n * Get the new sizes of a rectangle after rotated.\n * @param {Object} data - The original sizes.\n * @returns {Object} The result sizes.\n */\n\nfunction getRotatedSizes(_ref5) {\n  var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n  degree = Math.abs(degree) % 180;\n\n  if (degree === 90) {\n    return {\n      width: height,\n      height: width\n    };\n  }\n\n  var arc = degree % 90 * Math.PI / 180;\n  var sinArc = Math.sin(arc);\n  var cosArc = Math.cos(arc);\n  var newWidth = width * cosArc + height * sinArc;\n  var newHeight = width * sinArc + height * cosArc;\n  return degree > 90 ? {\n    width: newHeight,\n    height: newWidth\n  } : {\n    width: newWidth,\n    height: newHeight\n  };\n}\n/**\n * Get a canvas which drew the given image.\n * @param {HTMLImageElement} image - The image for drawing.\n * @param {Object} imageData - The image data.\n * @param {Object} canvasData - The canvas data.\n * @param {Object} options - The options.\n * @returns {HTMLCanvasElement} The result canvas.\n */\n\nfunction getSourceCanvas(image, _ref6, _ref7, _ref8) {\n  var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n  var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n  var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var maxSizes = getAdjustedSizes({\n    aspectRatio: aspectRatio,\n    width: maxWidth,\n    height: maxHeight\n  });\n  var minSizes = getAdjustedSizes({\n    aspectRatio: aspectRatio,\n    width: minWidth,\n    height: minHeight\n  }, 'cover');\n  var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n  var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n  // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n  var destMaxSizes = getAdjustedSizes({\n    aspectRatio: imageAspectRatio,\n    width: maxWidth,\n    height: maxHeight\n  });\n  var destMinSizes = getAdjustedSizes({\n    aspectRatio: imageAspectRatio,\n    width: minWidth,\n    height: minHeight\n  }, 'cover');\n  var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n  var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n  var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n  canvas.width = normalizeDecimalNumber(width);\n  canvas.height = normalizeDecimalNumber(height);\n  context.fillStyle = fillColor;\n  context.fillRect(0, 0, width, height);\n  context.save();\n  context.translate(width / 2, height / 2);\n  context.rotate(rotate * Math.PI / 180);\n  context.scale(scaleX, scaleY);\n  context.imageSmoothingEnabled = imageSmoothingEnabled;\n  context.imageSmoothingQuality = imageSmoothingQuality;\n  context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n    return Math.floor(normalizeDecimalNumber(param));\n  }))));\n  context.restore();\n  return canvas;\n}\nvar fromCharCode = String.fromCharCode;\n/**\n * Get string from char code in data view.\n * @param {DataView} dataView - The data view for read.\n * @param {number} start - The start index.\n * @param {number} length - The read length.\n * @returns {string} The read result.\n */\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i;\n  length += start;\n\n  for (i = start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\nvar REGEXP_DATA_URL_HEAD = /^data:.*,/;\n/**\n * Transform Data URL to array buffer.\n * @param {string} dataURL - The Data URL to transform.\n * @returns {ArrayBuffer} The result array buffer.\n */\n\nfunction dataURLToArrayBuffer(dataURL) {\n  var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n  var binary = atob(base64);\n  var arrayBuffer = new ArrayBuffer(binary.length);\n  var uint8 = new Uint8Array(arrayBuffer);\n  forEach(uint8, function (value, i) {\n    uint8[i] = binary.charCodeAt(i);\n  });\n  return arrayBuffer;\n}\n/**\n * Transform array buffer to Data URL.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n * @param {string} mimeType - The mime type of the Data URL.\n * @returns {string} The result Data URL.\n */\n\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\n  var chunks = [];\n  var chunkSize = 8192;\n  var uint8 = new Uint8Array(arrayBuffer);\n\n  while (uint8.length > 0) {\n    chunks.push(fromCharCode.apply(void 0, _toConsumableArray(uint8.subarray(0, chunkSize))));\n    uint8 = uint8.subarray(chunkSize);\n  }\n\n  return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n}\n/**\n * Get orientation value from given array buffer.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n * @returns {number} The read orientation value.\n */\n\nfunction resetAndGetOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var orientation; // Ignores range error when the image does not have correct Exif information\n\n  try {\n    var littleEndian;\n    var app1Start;\n    var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n    if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n      var length = dataView.byteLength;\n      var offset = 2;\n\n      while (offset + 1 < length) {\n        if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n          app1Start = offset;\n          break;\n        }\n\n        offset += 1;\n      }\n    }\n\n    if (app1Start) {\n      var exifIDCode = app1Start + 4;\n      var tiffOffset = app1Start + 10;\n\n      if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n        var endianness = dataView.getUint16(tiffOffset);\n        littleEndian = endianness === 0x4949;\n\n        if (littleEndian || endianness === 0x4D4D\n        /* bigEndian */\n        ) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n      }\n    }\n\n    if (ifdStart) {\n      var _length = dataView.getUint16(ifdStart, littleEndian);\n\n      var _offset;\n\n      var i;\n\n      for (i = 0; i < _length; i += 1) {\n        _offset = ifdStart + i * 12 + 2;\n\n        if (dataView.getUint16(_offset, littleEndian) === 0x0112\n        /* Orientation */\n        ) {\n            // 8 is the offset of the current tag's value\n            _offset += 8; // Get the original orientation value\n\n            orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n      }\n    }\n  } catch (e) {\n    orientation = 1;\n  }\n\n  return orientation;\n}\n/**\n * Parse Exif Orientation value.\n * @param {number} orientation - The orientation to parse.\n * @returns {Object} The parsed result.\n */\n\nfunction parseOrientation(orientation) {\n  var rotate = 0;\n  var scaleX = 1;\n  var scaleY = 1;\n\n  switch (orientation) {\n    // Flip horizontal\n    case 2:\n      scaleX = -1;\n      break;\n    // Rotate left 180\n\n    case 3:\n      rotate = -180;\n      break;\n    // Flip vertical\n\n    case 4:\n      scaleY = -1;\n      break;\n    // Flip vertical and rotate right 90\n\n    case 5:\n      rotate = 90;\n      scaleY = -1;\n      break;\n    // Rotate right 90\n\n    case 6:\n      rotate = 90;\n      break;\n    // Flip horizontal and rotate right 90\n\n    case 7:\n      rotate = 90;\n      scaleX = -1;\n      break;\n    // Rotate left 90\n\n    case 8:\n      rotate = -90;\n      break;\n\n    default:\n  }\n\n  return {\n    rotate: rotate,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n\nvar render = {\n  render: function render() {\n    this.initContainer();\n    this.initCanvas();\n    this.initCropBox();\n    this.renderCanvas();\n\n    if (this.cropped) {\n      this.renderCropBox();\n    }\n  },\n  initContainer: function initContainer() {\n    var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n    addClass(cropper, CLASS_HIDDEN);\n    removeClass(element, CLASS_HIDDEN);\n    var containerData = {\n      width: Math.max(container.offsetWidth, Number(options.minContainerWidth) || 200),\n      height: Math.max(container.offsetHeight, Number(options.minContainerHeight) || 100)\n    };\n    this.containerData = containerData;\n    setStyle(cropper, {\n      width: containerData.width,\n      height: containerData.height\n    });\n    addClass(element, CLASS_HIDDEN);\n    removeClass(cropper, CLASS_HIDDEN);\n  },\n  // Canvas (image wrapper)\n  initCanvas: function initCanvas() {\n    var containerData = this.containerData,\n        imageData = this.imageData;\n    var viewMode = this.options.viewMode;\n    var rotated = Math.abs(imageData.rotate) % 180 === 90;\n    var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n    var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n    var aspectRatio = naturalWidth / naturalHeight;\n    var canvasWidth = containerData.width;\n    var canvasHeight = containerData.height;\n\n    if (containerData.height * aspectRatio > containerData.width) {\n      if (viewMode === 3) {\n        canvasWidth = containerData.height * aspectRatio;\n      } else {\n        canvasHeight = containerData.width / aspectRatio;\n      }\n    } else if (viewMode === 3) {\n      canvasHeight = containerData.width / aspectRatio;\n    } else {\n      canvasWidth = containerData.height * aspectRatio;\n    }\n\n    var canvasData = {\n      aspectRatio: aspectRatio,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      width: canvasWidth,\n      height: canvasHeight\n    };\n    canvasData.left = (containerData.width - canvasWidth) / 2;\n    canvasData.top = (containerData.height - canvasHeight) / 2;\n    canvasData.oldLeft = canvasData.left;\n    canvasData.oldTop = canvasData.top;\n    this.canvasData = canvasData;\n    this.limited = viewMode === 1 || viewMode === 2;\n    this.limitCanvas(true, true);\n    this.initialImageData = assign({}, imageData);\n    this.initialCanvasData = assign({}, canvasData);\n  },\n  limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n    var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n    var viewMode = options.viewMode;\n    var aspectRatio = canvasData.aspectRatio;\n    var cropped = this.cropped && cropBoxData;\n\n    if (sizeLimited) {\n      var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n      var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n      if (viewMode > 1) {\n        minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n        minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n        if (viewMode === 3) {\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          } else {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          }\n        }\n      } else if (viewMode > 0) {\n        if (minCanvasWidth) {\n          minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n        } else if (minCanvasHeight) {\n          minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n        } else if (cropped) {\n          minCanvasWidth = cropBoxData.width;\n          minCanvasHeight = cropBoxData.height;\n\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          } else {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          }\n        }\n      }\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: minCanvasWidth,\n        height: minCanvasHeight\n      });\n\n      minCanvasWidth = _getAdjustedSizes.width;\n      minCanvasHeight = _getAdjustedSizes.height;\n      canvasData.minWidth = minCanvasWidth;\n      canvasData.minHeight = minCanvasHeight;\n      canvasData.maxWidth = Infinity;\n      canvasData.maxHeight = Infinity;\n    }\n\n    if (positionLimited) {\n      if (viewMode > (cropped ? 0 : 1)) {\n        var newCanvasLeft = containerData.width - canvasData.width;\n        var newCanvasTop = containerData.height - canvasData.height;\n        canvasData.minLeft = Math.min(0, newCanvasLeft);\n        canvasData.minTop = Math.min(0, newCanvasTop);\n        canvasData.maxLeft = Math.max(0, newCanvasLeft);\n        canvasData.maxTop = Math.max(0, newCanvasTop);\n\n        if (cropped && this.limited) {\n          canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n          canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n          canvasData.maxLeft = cropBoxData.left;\n          canvasData.maxTop = cropBoxData.top;\n\n          if (viewMode === 2) {\n            if (canvasData.width >= containerData.width) {\n              canvasData.minLeft = Math.min(0, newCanvasLeft);\n              canvasData.maxLeft = Math.max(0, newCanvasLeft);\n            }\n\n            if (canvasData.height >= containerData.height) {\n              canvasData.minTop = Math.min(0, newCanvasTop);\n              canvasData.maxTop = Math.max(0, newCanvasTop);\n            }\n          }\n        }\n      } else {\n        canvasData.minLeft = -canvasData.width;\n        canvasData.minTop = -canvasData.height;\n        canvasData.maxLeft = containerData.width;\n        canvasData.maxTop = containerData.height;\n      }\n    }\n  },\n  renderCanvas: function renderCanvas(changed, transformed) {\n    var canvasData = this.canvasData,\n        imageData = this.imageData;\n\n    if (transformed) {\n      var _getRotatedSizes = getRotatedSizes({\n        width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n        height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n        degree: imageData.rotate || 0\n      }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n\n      var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n      var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n      canvasData.left -= (width - canvasData.width) / 2;\n      canvasData.top -= (height - canvasData.height) / 2;\n      canvasData.width = width;\n      canvasData.height = height;\n      canvasData.aspectRatio = naturalWidth / naturalHeight;\n      canvasData.naturalWidth = naturalWidth;\n      canvasData.naturalHeight = naturalHeight;\n      this.limitCanvas(true, false);\n    }\n\n    if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n      canvasData.left = canvasData.oldLeft;\n    }\n\n    if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n      canvasData.top = canvasData.oldTop;\n    }\n\n    canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n    canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n    this.limitCanvas(false, true);\n    canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n    canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n    canvasData.oldLeft = canvasData.left;\n    canvasData.oldTop = canvasData.top;\n    setStyle(this.canvas, assign({\n      width: canvasData.width,\n      height: canvasData.height\n    }, getTransforms({\n      translateX: canvasData.left,\n      translateY: canvasData.top\n    })));\n    this.renderImage(changed);\n\n    if (this.cropped && this.limited) {\n      this.limitCropBox(true, true);\n    }\n  },\n  renderImage: function renderImage(changed) {\n    var canvasData = this.canvasData,\n        imageData = this.imageData;\n    var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n    var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n    assign(imageData, {\n      width: width,\n      height: height,\n      left: (canvasData.width - width) / 2,\n      top: (canvasData.height - height) / 2\n    });\n    setStyle(this.image, assign({\n      width: imageData.width,\n      height: imageData.height\n    }, getTransforms(assign({\n      translateX: imageData.left,\n      translateY: imageData.top\n    }, imageData))));\n\n    if (changed) {\n      this.output();\n    }\n  },\n  initCropBox: function initCropBox() {\n    var options = this.options,\n        canvasData = this.canvasData;\n    var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n    var autoCropArea = Number(options.autoCropArea) || 0.8;\n    var cropBoxData = {\n      width: canvasData.width,\n      height: canvasData.height\n    };\n\n    if (aspectRatio) {\n      if (canvasData.height * aspectRatio > canvasData.width) {\n        cropBoxData.height = cropBoxData.width / aspectRatio;\n      } else {\n        cropBoxData.width = cropBoxData.height * aspectRatio;\n      }\n    }\n\n    this.cropBoxData = cropBoxData;\n    this.limitCropBox(true, true); // Initialize auto crop area\n\n    cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n    cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n    cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n    cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n    cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n    cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n    cropBoxData.oldLeft = cropBoxData.left;\n    cropBoxData.oldTop = cropBoxData.top;\n    this.initialCropBoxData = assign({}, cropBoxData);\n  },\n  limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n    var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n    var aspectRatio = options.aspectRatio;\n\n    if (sizeLimited) {\n      var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n      var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n      var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n      var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n      minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n      minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n      if (aspectRatio) {\n        if (minCropBoxWidth && minCropBoxHeight) {\n          if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n        } else if (minCropBoxWidth) {\n          minCropBoxHeight = minCropBoxWidth / aspectRatio;\n        } else if (minCropBoxHeight) {\n          minCropBoxWidth = minCropBoxHeight * aspectRatio;\n        }\n\n        if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n          maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n        } else {\n          maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n        }\n      } // The minWidth/Height must be less than maxWidth/Height\n\n\n      cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n      cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n      cropBoxData.maxWidth = maxCropBoxWidth;\n      cropBoxData.maxHeight = maxCropBoxHeight;\n    }\n\n    if (positionLimited) {\n      if (limited) {\n        cropBoxData.minLeft = Math.max(0, canvasData.left);\n        cropBoxData.minTop = Math.max(0, canvasData.top);\n        cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n        cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n      } else {\n        cropBoxData.minLeft = 0;\n        cropBoxData.minTop = 0;\n        cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n        cropBoxData.maxTop = containerData.height - cropBoxData.height;\n      }\n    }\n  },\n  renderCropBox: function renderCropBox() {\n    var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n\n    if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n      cropBoxData.left = cropBoxData.oldLeft;\n    }\n\n    if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n      cropBoxData.top = cropBoxData.oldTop;\n    }\n\n    cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n    cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n    this.limitCropBox(false, true);\n    cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n    cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n    cropBoxData.oldLeft = cropBoxData.left;\n    cropBoxData.oldTop = cropBoxData.top;\n\n    if (options.movable && options.cropBoxMovable) {\n      // Turn to move the canvas when the crop box is equal to the container\n      setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n    }\n\n    setStyle(this.cropBox, assign({\n      width: cropBoxData.width,\n      height: cropBoxData.height\n    }, getTransforms({\n      translateX: cropBoxData.left,\n      translateY: cropBoxData.top\n    })));\n\n    if (this.cropped && this.limited) {\n      this.limitCanvas(true, true);\n    }\n\n    if (!this.disabled) {\n      this.output();\n    }\n  },\n  output: function output() {\n    this.preview();\n    dispatchEvent(this.element, EVENT_CROP, this.getData());\n  }\n};\n\nvar preview = {\n  initPreview: function initPreview() {\n    var crossOrigin = this.crossOrigin;\n    var preview = this.options.preview;\n    var url = crossOrigin ? this.crossOriginUrl : this.url;\n    var image = document.createElement('img');\n\n    if (crossOrigin) {\n      image.crossOrigin = crossOrigin;\n    }\n\n    image.src = url;\n    this.viewBox.appendChild(image);\n    this.viewBoxImage = image;\n\n    if (!preview) {\n      return;\n    }\n\n    var previews = preview;\n\n    if (typeof preview === 'string') {\n      previews = this.element.ownerDocument.querySelectorAll(preview);\n    } else if (preview.querySelector) {\n      previews = [preview];\n    }\n\n    this.previews = previews;\n    forEach(previews, function (el) {\n      var img = document.createElement('img'); // Save the original size for recover\n\n      setData(el, DATA_PREVIEW, {\n        width: el.offsetWidth,\n        height: el.offsetHeight,\n        html: el.innerHTML\n      });\n\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      img.src = url;\n      /**\n       * Override img element styles\n       * Add `display:block` to avoid margin top issue\n       * Add `height:auto` to override `height` attribute on IE8\n       * (Occur only when margin-top <= -height)\n       */\n\n      img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n      el.innerHTML = '';\n      el.appendChild(img);\n    });\n  },\n  resetPreview: function resetPreview() {\n    forEach(this.previews, function (element) {\n      var data = getData(element, DATA_PREVIEW);\n      setStyle(element, {\n        width: data.width,\n        height: data.height\n      });\n      element.innerHTML = data.html;\n      removeData(element, DATA_PREVIEW);\n    });\n  },\n  preview: function preview() {\n    var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n    var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n    var width = imageData.width,\n        height = imageData.height;\n    var left = cropBoxData.left - canvasData.left - imageData.left;\n    var top = cropBoxData.top - canvasData.top - imageData.top;\n\n    if (!this.cropped || this.disabled) {\n      return;\n    }\n\n    setStyle(this.viewBoxImage, assign({\n      width: width,\n      height: height\n    }, getTransforms(assign({\n      translateX: -left,\n      translateY: -top\n    }, imageData))));\n    forEach(this.previews, function (element) {\n      var data = getData(element, DATA_PREVIEW);\n      var originalWidth = data.width;\n      var originalHeight = data.height;\n      var newWidth = originalWidth;\n      var newHeight = originalHeight;\n      var ratio = 1;\n\n      if (cropBoxWidth) {\n        ratio = originalWidth / cropBoxWidth;\n        newHeight = cropBoxHeight * ratio;\n      }\n\n      if (cropBoxHeight && newHeight > originalHeight) {\n        ratio = originalHeight / cropBoxHeight;\n        newWidth = cropBoxWidth * ratio;\n        newHeight = originalHeight;\n      }\n\n      setStyle(element, {\n        width: newWidth,\n        height: newHeight\n      });\n      setStyle(element.getElementsByTagName('img')[0], assign({\n        width: width * ratio,\n        height: height * ratio\n      }, getTransforms(assign({\n        translateX: -left * ratio,\n        translateY: -top * ratio\n      }, imageData))));\n    });\n  }\n};\n\nvar events = {\n  bind: function bind() {\n    var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n\n    if (isFunction(options.cropstart)) {\n      addListener(element, EVENT_CROP_START, options.cropstart);\n    }\n\n    if (isFunction(options.cropmove)) {\n      addListener(element, EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if (isFunction(options.cropend)) {\n      addListener(element, EVENT_CROP_END, options.cropend);\n    }\n\n    if (isFunction(options.crop)) {\n      addListener(element, EVENT_CROP, options.crop);\n    }\n\n    if (isFunction(options.zoom)) {\n      addListener(element, EVENT_ZOOM, options.zoom);\n    }\n\n    addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n    if (options.zoomable && options.zoomOnWheel) {\n      addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this));\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n    }\n\n    addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n    addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n    if (options.responsive) {\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n    }\n  },\n  unbind: function unbind() {\n    var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n\n    if (isFunction(options.cropstart)) {\n      removeListener(element, EVENT_CROP_START, options.cropstart);\n    }\n\n    if (isFunction(options.cropmove)) {\n      removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if (isFunction(options.cropend)) {\n      removeListener(element, EVENT_CROP_END, options.cropend);\n    }\n\n    if (isFunction(options.crop)) {\n      removeListener(element, EVENT_CROP, options.crop);\n    }\n\n    if (isFunction(options.zoom)) {\n      removeListener(element, EVENT_ZOOM, options.zoom);\n    }\n\n    removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n    if (options.zoomable && options.zoomOnWheel) {\n      removeListener(cropper, EVENT_WHEEL, this.onWheel);\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n    }\n\n    removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n    removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n    if (options.responsive) {\n      removeListener(window, EVENT_RESIZE, this.onResize);\n    }\n  }\n};\n\nvar handlers = {\n  resize: function resize() {\n    var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n    var minContainerWidth = Number(options.minContainerWidth) || 200;\n    var minContainerHeight = Number(options.minContainerHeight) || 100;\n\n    if (this.disabled || containerData.width <= minContainerWidth || containerData.height <= minContainerHeight) {\n      return;\n    }\n\n    var ratio = container.offsetWidth / containerData.width; // Resize when width changed or height changed\n\n    if (ratio !== 1 || container.offsetHeight !== containerData.height) {\n      var canvasData;\n      var cropBoxData;\n\n      if (options.restore) {\n        canvasData = this.getCanvasData();\n        cropBoxData = this.getCropBoxData();\n      }\n\n      this.render();\n\n      if (options.restore) {\n        this.setCanvasData(forEach(canvasData, function (n, i) {\n          canvasData[i] = n * ratio;\n        }));\n        this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n          cropBoxData[i] = n * ratio;\n        }));\n      }\n    }\n  },\n  dblclick: function dblclick() {\n    if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n      return;\n    }\n\n    this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n  },\n  wheel: function wheel(e) {\n    var _this = this;\n\n    var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n    var delta = 1;\n\n    if (this.disabled) {\n      return;\n    }\n\n    e.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n    setTimeout(function () {\n      _this.wheeling = false;\n    }, 50);\n\n    if (e.deltaY) {\n      delta = e.deltaY > 0 ? 1 : -1;\n    } else if (e.wheelDelta) {\n      delta = -e.wheelDelta / 120;\n    } else if (e.detail) {\n      delta = e.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, e);\n  },\n  cropStart: function cropStart(e) {\n    if (this.disabled) {\n      return;\n    }\n\n    var options = this.options,\n        pointers = this.pointers;\n    var action;\n\n    if (e.changedTouches) {\n      // Handle touch event\n      forEach(e.changedTouches, function (touch) {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      // Handle mouse event and pointer event\n      pointers[e.pointerId || 0] = getPointer(e);\n    }\n\n    if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n      action = ACTION_ZOOM;\n    } else {\n      action = getData(e.target, DATA_ACTION);\n    }\n\n    if (!REGEXP_ACTIONS.test(action)) {\n      return;\n    }\n\n    if (dispatchEvent(this.element, EVENT_CROP_START, {\n      originalEvent: e,\n      action: action\n    }) === false) {\n      return;\n    } // This line is required for preventing page zooming in iOS browsers\n\n\n    e.preventDefault();\n    this.action = action;\n    this.cropping = false;\n\n    if (action === ACTION_CROP) {\n      this.cropping = true;\n      addClass(this.dragBox, CLASS_MODAL);\n    }\n  },\n  cropMove: function cropMove(e) {\n    var action = this.action;\n\n    if (this.disabled || !action) {\n      return;\n    }\n\n    var pointers = this.pointers;\n    e.preventDefault();\n\n    if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n      originalEvent: e,\n      action: action\n    }) === false) {\n      return;\n    }\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, function (touch) {\n        // The first parameter should not be undefined (#432)\n        assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n      });\n    } else {\n      assign(pointers[e.pointerId || 0] || {}, getPointer(e, true));\n    }\n\n    this.change(e);\n  },\n  cropEnd: function cropEnd(e) {\n    if (this.disabled) {\n      return;\n    }\n\n    var action = this.action,\n        pointers = this.pointers;\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, function (touch) {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[e.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!Object.keys(pointers).length) {\n      this.action = '';\n    }\n\n    if (this.cropping) {\n      this.cropping = false;\n      toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n    }\n\n    dispatchEvent(this.element, EVENT_CROP_END, {\n      originalEvent: e,\n      action: action\n    });\n  }\n};\n\nvar change = {\n  change: function change(e) {\n    var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n    var action = this.action;\n    var aspectRatio = options.aspectRatio;\n    var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n    var right = left + width;\n    var bottom = top + height;\n    var minLeft = 0;\n    var minTop = 0;\n    var maxWidth = containerData.width;\n    var maxHeight = containerData.height;\n    var renderable = true;\n    var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n    if (!aspectRatio && e.shiftKey) {\n      aspectRatio = width && height ? width / height : 1;\n    }\n\n    if (this.limited) {\n      minLeft = cropBoxData.minLeft;\n      minTop = cropBoxData.minTop;\n      maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n      maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n    }\n\n    var pointer = pointers[Object.keys(pointers)[0]];\n    var range = {\n      x: pointer.endX - pointer.startX,\n      y: pointer.endY - pointer.startY\n    };\n\n    var check = function check(side) {\n      switch (side) {\n        case ACTION_EAST:\n          if (right + range.x > maxWidth) {\n            range.x = maxWidth - right;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (left + range.x < minLeft) {\n            range.x = minLeft - left;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (top + range.y < minTop) {\n            range.y = minTop - top;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (bottom + range.y > maxHeight) {\n            range.y = maxHeight - bottom;\n          }\n\n          break;\n\n        default:\n      }\n    };\n\n    switch (action) {\n      // Move crop box\n      case ACTION_ALL:\n        left += range.x;\n        top += range.y;\n        break;\n      // Resize crop box\n\n      case ACTION_EAST:\n        if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_EAST);\n        width += range.x;\n\n        if (width < 0) {\n          action = ACTION_WEST;\n          width = -width;\n          left -= width;\n        }\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top += (cropBoxData.height - height) / 2;\n        }\n\n        break;\n\n      case ACTION_NORTH:\n        if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_NORTH);\n        height -= range.y;\n        top += range.y;\n\n        if (height < 0) {\n          action = ACTION_SOUTH;\n          height = -height;\n          top -= height;\n        }\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left += (cropBoxData.width - width) / 2;\n        }\n\n        break;\n\n      case ACTION_WEST:\n        if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_WEST);\n        width -= range.x;\n        left += range.x;\n\n        if (width < 0) {\n          action = ACTION_EAST;\n          width = -width;\n          left -= width;\n        }\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top += (cropBoxData.height - height) / 2;\n        }\n\n        break;\n\n      case ACTION_SOUTH:\n        if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_SOUTH);\n        height += range.y;\n\n        if (height < 0) {\n          action = ACTION_NORTH;\n          height = -height;\n          top -= height;\n        }\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left += (cropBoxData.width - width) / 2;\n        }\n\n        break;\n\n      case ACTION_NORTH_EAST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n        } else {\n          check(ACTION_NORTH);\n          check(ACTION_EAST);\n\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_NORTH_WEST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n\n      case ACTION_NORTH_WEST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n          left += cropBoxData.width - width;\n        } else {\n          check(ACTION_NORTH);\n          check(ACTION_WEST);\n\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_NORTH_EAST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n\n      case ACTION_SOUTH_WEST:\n        if (aspectRatio) {\n          if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          height = width / aspectRatio;\n        } else {\n          check(ACTION_SOUTH);\n          check(ACTION_WEST);\n\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_EAST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n\n      case ACTION_SOUTH_EAST:\n        if (aspectRatio) {\n          if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n          height = width / aspectRatio;\n        } else {\n          check(ACTION_SOUTH);\n          check(ACTION_EAST);\n\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_WEST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n      // Move canvas\n\n      case ACTION_MOVE:\n        this.move(range.x, range.y);\n        renderable = false;\n        break;\n      // Zoom canvas\n\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), e);\n        renderable = false;\n        break;\n      // Create crop box\n\n      case ACTION_CROP:\n        if (!range.x || !range.y) {\n          renderable = false;\n          break;\n        }\n\n        offset = getOffset(this.cropper);\n        left = pointer.startX - offset.left;\n        top = pointer.startY - offset.top;\n        width = cropBoxData.minWidth;\n        height = cropBoxData.minHeight;\n\n        if (range.x > 0) {\n          action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n        } else if (range.x < 0) {\n          left -= width;\n          action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n        }\n\n        if (range.y < 0) {\n          top -= height;\n        } // Show the crop box if is hidden\n\n\n        if (!this.cropped) {\n          removeClass(this.cropBox, CLASS_HIDDEN);\n          this.cropped = true;\n\n          if (this.limited) {\n            this.limitCropBox(true, true);\n          }\n        }\n\n        break;\n\n      default:\n    }\n\n    if (renderable) {\n      cropBoxData.width = width;\n      cropBoxData.height = height;\n      cropBoxData.left = left;\n      cropBoxData.top = top;\n      this.action = action;\n      this.renderCropBox();\n    } // Override\n\n\n    forEach(pointers, function (p) {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  }\n};\n\nvar methods = {\n  // Show the crop box manually\n  crop: function crop() {\n    if (this.ready && !this.cropped && !this.disabled) {\n      this.cropped = true;\n      this.limitCropBox(true, true);\n\n      if (this.options.modal) {\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n\n      removeClass(this.cropBox, CLASS_HIDDEN);\n      this.setCropBoxData(this.initialCropBoxData);\n    }\n\n    return this;\n  },\n  // Reset the image and crop box to their initial states\n  reset: function reset() {\n    if (this.ready && !this.disabled) {\n      this.imageData = assign({}, this.initialImageData);\n      this.canvasData = assign({}, this.initialCanvasData);\n      this.cropBoxData = assign({}, this.initialCropBoxData);\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    }\n\n    return this;\n  },\n  // Clear the crop box\n  clear: function clear() {\n    if (this.cropped && !this.disabled) {\n      assign(this.cropBoxData, {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0\n      });\n      this.cropped = false;\n      this.renderCropBox();\n      this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n      this.renderCanvas();\n      removeClass(this.dragBox, CLASS_MODAL);\n      addClass(this.cropBox, CLASS_HIDDEN);\n    }\n\n    return this;\n  },\n\n  /**\n   * Replace the image's src and rebuild the cropper\n   * @param {string} url - The new URL.\n   * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n   * @returns {Cropper} this\n   */\n  replace: function replace(url) {\n    var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!this.disabled && url) {\n      if (this.isImg) {\n        this.element.src = url;\n      }\n\n      if (hasSameSize) {\n        this.url = url;\n        this.image.src = url;\n\n        if (this.ready) {\n          this.viewBoxImage.src = url;\n          forEach(this.previews, function (element) {\n            element.getElementsByTagName('img')[0].src = url;\n          });\n        }\n      } else {\n        if (this.isImg) {\n          this.replaced = true;\n        }\n\n        this.options.data = null;\n        this.uncreate();\n        this.load(url);\n      }\n    }\n\n    return this;\n  },\n  // Enable (unfreeze) the cropper\n  enable: function enable() {\n    if (this.ready && this.disabled) {\n      this.disabled = false;\n      removeClass(this.cropper, CLASS_DISABLED);\n    }\n\n    return this;\n  },\n  // Disable (freeze) the cropper\n  disable: function disable() {\n    if (this.ready && !this.disabled) {\n      this.disabled = true;\n      addClass(this.cropper, CLASS_DISABLED);\n    }\n\n    return this;\n  },\n\n  /**\n   * Destroy the cropper and remove the instance from the image\n   * @returns {Cropper} this\n   */\n  destroy: function destroy() {\n    var element = this.element;\n\n    if (!element[NAMESPACE]) {\n      return this;\n    }\n\n    element[NAMESPACE] = undefined;\n\n    if (this.isImg && this.replaced) {\n      element.src = this.originalUrl;\n    }\n\n    this.uncreate();\n    return this;\n  },\n\n  /**\n   * Move the canvas with relative offsets\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n   * @returns {Cropper} this\n   */\n  move: function move(offsetX) {\n    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n    var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n    return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n  },\n\n  /**\n   * Move the canvas to an absolute point\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Cropper} this\n   */\n  moveTo: function moveTo(x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n    var canvasData = this.canvasData;\n    var changed = false;\n    x = Number(x);\n    y = Number(y);\n\n    if (this.ready && !this.disabled && this.options.movable) {\n      if (isNumber(x)) {\n        canvasData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        canvasData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderCanvas(true);\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Zoom the canvas with a relative ratio\n   * @param {number} ratio - The target ratio.\n   * @param {Event} _originalEvent - The original event if any.\n   * @returns {Cropper} this\n   */\n  zoom: function zoom(ratio, _originalEvent) {\n    var canvasData = this.canvasData;\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n  },\n\n  /**\n   * Zoom the canvas to an absolute ratio\n   * @param {number} ratio - The target ratio.\n   * @param {Object} pivot - The zoom pivot point coordinate.\n   * @param {Event} _originalEvent - The original event if any.\n   * @returns {Cropper} this\n   */\n  zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n    var options = this.options,\n        canvasData = this.canvasData;\n    var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n    ratio = Number(ratio);\n\n    if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n      var newWidth = naturalWidth * ratio;\n      var newHeight = naturalHeight * ratio;\n\n      if (dispatchEvent(this.element, EVENT_ZOOM, {\n        ratio: ratio,\n        oldRatio: width / naturalWidth,\n        originalEvent: _originalEvent\n      }) === false) {\n        return this;\n      }\n\n      if (_originalEvent) {\n        var pointers = this.pointers;\n        var offset = getOffset(this.cropper);\n        var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY\n        }; // Zoom from the triggering point of the event\n\n        canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n        canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n      } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n        canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n        canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n      } else {\n        // Zoom from the center of the canvas\n        canvasData.left -= (newWidth - width) / 2;\n        canvasData.top -= (newHeight - height) / 2;\n      }\n\n      canvasData.width = newWidth;\n      canvasData.height = newHeight;\n      this.renderCanvas(true);\n    }\n\n    return this;\n  },\n\n  /**\n   * Rotate the canvas with a relative degree\n   * @param {number} degree - The rotate degree.\n   * @returns {Cropper} this\n   */\n  rotate: function rotate(degree) {\n    return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n  },\n\n  /**\n   * Rotate the canvas to an absolute degree\n   * @param {number} degree - The rotate degree.\n   * @returns {Cropper} this\n   */\n  rotateTo: function rotateTo(degree) {\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n      this.imageData.rotate = degree % 360;\n      this.renderCanvas(true, true);\n    }\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Cropper} this\n   */\n  scaleX: function scaleX(_scaleX) {\n    var scaleY = this.imageData.scaleY;\n    return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n  },\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Cropper} this\n   */\n  scaleY: function scaleY(_scaleY) {\n    var scaleX = this.imageData.scaleX;\n    return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n  },\n\n  /**\n   * Scale the image\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Cropper} this\n   */\n  scale: function scale(scaleX) {\n    var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n    var imageData = this.imageData;\n    var transformed = false;\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.ready && !this.disabled && this.options.scalable) {\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        transformed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        transformed = true;\n      }\n\n      if (transformed) {\n        this.renderCanvas(true, true);\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Get the cropped area position and size data (base on the original image)\n   * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n   * @returns {Object} The result cropped data.\n   */\n  getData: function getData$$1() {\n    var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n    var data;\n\n    if (this.ready && this.cropped) {\n      data = {\n        x: cropBoxData.left - canvasData.left,\n        y: cropBoxData.top - canvasData.top,\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      };\n      var ratio = imageData.width / imageData.naturalWidth;\n      forEach(data, function (n, i) {\n        data[i] = n / ratio;\n      });\n\n      if (rounded) {\n        // In case rounding off leads to extra 1px in right or bottom border\n        // we should round the top-left corner and the dimension (#343).\n        var bottom = Math.round(data.y + data.height);\n        var right = Math.round(data.x + data.width);\n        data.x = Math.round(data.x);\n        data.y = Math.round(data.y);\n        data.width = right - data.x;\n        data.height = bottom - data.y;\n      }\n    } else {\n      data = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (options.rotatable) {\n      data.rotate = imageData.rotate || 0;\n    }\n\n    if (options.scalable) {\n      data.scaleX = imageData.scaleX || 1;\n      data.scaleY = imageData.scaleY || 1;\n    }\n\n    return data;\n  },\n\n  /**\n   * Set the cropped area position and size with new data\n   * @param {Object} data - The new data.\n   * @returns {Cropper} this\n   */\n  setData: function setData$$1(data) {\n    var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n    var cropBoxData = {};\n\n    if (this.ready && !this.disabled && isPlainObject(data)) {\n      var transformed = false;\n\n      if (options.rotatable) {\n        if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n          imageData.rotate = data.rotate;\n          transformed = true;\n        }\n      }\n\n      if (options.scalable) {\n        if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n          imageData.scaleX = data.scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n          imageData.scaleY = data.scaleY;\n          transformed = true;\n        }\n      }\n\n      if (transformed) {\n        this.renderCanvas(true, true);\n      }\n\n      var ratio = imageData.width / imageData.naturalWidth;\n\n      if (isNumber(data.x)) {\n        cropBoxData.left = data.x * ratio + canvasData.left;\n      }\n\n      if (isNumber(data.y)) {\n        cropBoxData.top = data.y * ratio + canvasData.top;\n      }\n\n      if (isNumber(data.width)) {\n        cropBoxData.width = data.width * ratio;\n      }\n\n      if (isNumber(data.height)) {\n        cropBoxData.height = data.height * ratio;\n      }\n\n      this.setCropBoxData(cropBoxData);\n    }\n\n    return this;\n  },\n\n  /**\n   * Get the container size data.\n   * @returns {Object} The result container data.\n   */\n  getContainerData: function getContainerData() {\n    return this.ready ? assign({}, this.containerData) : {};\n  },\n\n  /**\n   * Get the image position and size data.\n   * @returns {Object} The result image data.\n   */\n  getImageData: function getImageData() {\n    return this.sized ? assign({}, this.imageData) : {};\n  },\n\n  /**\n   * Get the canvas position and size data.\n   * @returns {Object} The result canvas data.\n   */\n  getCanvasData: function getCanvasData() {\n    var canvasData = this.canvasData;\n    var data = {};\n\n    if (this.ready) {\n      forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n        data[n] = canvasData[n];\n      });\n    }\n\n    return data;\n  },\n\n  /**\n   * Set the canvas position and size with new data.\n   * @param {Object} data - The new canvas data.\n   * @returns {Cropper} this\n   */\n  setCanvasData: function setCanvasData(data) {\n    var canvasData = this.canvasData;\n    var aspectRatio = canvasData.aspectRatio;\n\n    if (this.ready && !this.disabled && isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        canvasData.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        canvasData.top = data.top;\n      }\n\n      if (isNumber(data.width)) {\n        canvasData.width = data.width;\n        canvasData.height = data.width / aspectRatio;\n      } else if (isNumber(data.height)) {\n        canvasData.height = data.height;\n        canvasData.width = data.height * aspectRatio;\n      }\n\n      this.renderCanvas(true);\n    }\n\n    return this;\n  },\n\n  /**\n   * Get the crop box position and size data.\n   * @returns {Object} The result crop box data.\n   */\n  getCropBoxData: function getCropBoxData() {\n    var cropBoxData = this.cropBoxData;\n    var data;\n\n    if (this.ready && this.cropped) {\n      data = {\n        left: cropBoxData.left,\n        top: cropBoxData.top,\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      };\n    }\n\n    return data || {};\n  },\n\n  /**\n   * Set the crop box position and size with new data.\n   * @param {Object} data - The new crop box data.\n   * @returns {Cropper} this\n   */\n  setCropBoxData: function setCropBoxData(data) {\n    var cropBoxData = this.cropBoxData;\n    var aspectRatio = this.options.aspectRatio;\n    var widthChanged;\n    var heightChanged;\n\n    if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        cropBoxData.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        cropBoxData.top = data.top;\n      }\n\n      if (isNumber(data.width) && data.width !== cropBoxData.width) {\n        widthChanged = true;\n        cropBoxData.width = data.width;\n      }\n\n      if (isNumber(data.height) && data.height !== cropBoxData.height) {\n        heightChanged = true;\n        cropBoxData.height = data.height;\n      }\n\n      if (aspectRatio) {\n        if (widthChanged) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else if (heightChanged) {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.renderCropBox();\n    }\n\n    return this;\n  },\n\n  /**\n   * Get a canvas drawn the cropped image.\n   * @param {Object} [options={}] - The config options.\n   * @returns {HTMLCanvasElement} - The result canvas.\n   */\n  getCroppedCanvas: function getCroppedCanvas() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.ready || !window.HTMLCanvasElement) {\n      return null;\n    }\n\n    var canvasData = this.canvasData;\n    var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n    if (!this.cropped) {\n      return source;\n    }\n\n    var _this$getData = this.getData(),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n\n    var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n    if (ratio !== 1) {\n      initialX *= ratio;\n      initialY *= ratio;\n      initialWidth *= ratio;\n      initialHeight *= ratio;\n    }\n\n    var aspectRatio = initialWidth / initialHeight;\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: options.maxWidth || Infinity,\n      height: options.maxHeight || Infinity\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: options.minWidth || 0,\n      height: options.minHeight || 0\n    }, 'cover');\n\n    var _getAdjustedSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: options.width || (ratio !== 1 ? source.width : initialWidth),\n      height: options.height || (ratio !== 1 ? source.height : initialHeight)\n    }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n\n    width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n    height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = options.fillColor || 'transparent';\n    context.fillRect(0, 0, width, height);\n    var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n    if (imageSmoothingQuality) {\n      context.imageSmoothingQuality = imageSmoothingQuality;\n    } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n    var sourceWidth = source.width;\n    var sourceHeight = source.height; // Source canvas parameters\n\n    var srcX = initialX;\n    var srcY = initialY;\n    var srcWidth;\n    var srcHeight; // Destination canvas parameters\n\n    var dstX;\n    var dstY;\n    var dstWidth;\n    var dstHeight;\n\n    if (srcX <= -initialWidth || srcX > sourceWidth) {\n      srcX = 0;\n      srcWidth = 0;\n      dstX = 0;\n      dstWidth = 0;\n    } else if (srcX <= 0) {\n      dstX = -srcX;\n      srcX = 0;\n      srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n      dstWidth = srcWidth;\n    } else if (srcX <= sourceWidth) {\n      dstX = 0;\n      srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n      dstWidth = srcWidth;\n    }\n\n    if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n      srcY = 0;\n      srcHeight = 0;\n      dstY = 0;\n      dstHeight = 0;\n    } else if (srcY <= 0) {\n      dstY = -srcY;\n      srcY = 0;\n      srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n      dstHeight = srcHeight;\n    } else if (srcY <= sourceHeight) {\n      dstY = 0;\n      srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n      dstHeight = srcHeight;\n    }\n\n    var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n    if (dstWidth > 0 && dstHeight > 0) {\n      var scale = width / initialWidth;\n      params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n    } // All the numerical parameters should be integer for `drawImage`\n    // https://github.com/fengyuanchen/cropper/issues/476\n\n\n    context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    return canvas;\n  },\n\n  /**\n   * Change the aspect ratio of the crop box.\n   * @param {number} aspectRatio - The new aspect ratio.\n   * @returns {Cropper} this\n   */\n  setAspectRatio: function setAspectRatio(aspectRatio) {\n    var options = this.options;\n\n    if (!this.disabled && !isUndefined(aspectRatio)) {\n      // 0 -> NaN\n      options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n      if (this.ready) {\n        this.initCropBox();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Change the drag mode.\n   * @param {string} mode - The new drag mode.\n   * @returns {Cropper} this\n   */\n  setDragMode: function setDragMode(mode) {\n    var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n\n    if (this.ready && !this.disabled) {\n      var croppable = mode === DRAG_MODE_CROP;\n      var movable = options.movable && mode === DRAG_MODE_MOVE;\n      mode = croppable || movable ? mode : DRAG_MODE_NONE;\n      options.dragMode = mode;\n      setData(dragBox, DATA_ACTION, mode);\n      toggleClass(dragBox, CLASS_CROP, croppable);\n      toggleClass(dragBox, CLASS_MOVE, movable);\n\n      if (!options.cropBoxMovable) {\n        // Sync drag mode to crop box when it is not movable\n        setData(face, DATA_ACTION, mode);\n        toggleClass(face, CLASS_CROP, croppable);\n        toggleClass(face, CLASS_MOVE, movable);\n      }\n    }\n\n    return this;\n  }\n};\n\nvar AnotherCropper = WINDOW.Cropper;\n\nvar Cropper =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a new Cropper.\n   * @param {Element} element - The target element for cropping.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  function Cropper(element) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Cropper);\n\n    if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n      throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n    }\n\n    this.element = element;\n    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n    this.cropped = false;\n    this.disabled = false;\n    this.pointers = {};\n    this.ready = false;\n    this.reloading = false;\n    this.replaced = false;\n    this.sized = false;\n    this.sizing = false;\n    this.init();\n  }\n\n  _createClass(Cropper, [{\n    key: \"init\",\n    value: function init() {\n      var element = this.element;\n      var tagName = element.tagName.toLowerCase();\n      var url;\n\n      if (element[NAMESPACE]) {\n        return;\n      }\n\n      element[NAMESPACE] = this;\n\n      if (tagName === 'img') {\n        this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n        url = element.getAttribute('src') || '';\n        this.originalUrl = url; // Stop when it's a blank image\n\n        if (!url) {\n          return;\n        } // e.g.: \"http://example.com/img/picture.jpg\"\n\n\n        url = element.src;\n      } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n        url = element.toDataURL();\n      }\n\n      this.load(url);\n    }\n  }, {\n    key: \"load\",\n    value: function load(url) {\n      var _this = this;\n\n      if (!url) {\n        return;\n      }\n\n      this.url = url;\n      this.imageData = {};\n      var element = this.element,\n          options = this.options;\n\n      if (!options.rotatable && !options.scalable) {\n        options.checkOrientation = false;\n      } // Only IE10+ supports Typed Arrays\n\n\n      if (!options.checkOrientation || !window.ArrayBuffer) {\n        this.clone();\n        return;\n      } // XMLHttpRequest disallows to open a Data URL in some browsers like IE11 and Safari\n\n\n      if (REGEXP_DATA_URL.test(url)) {\n        if (REGEXP_DATA_URL_JPEG.test(url)) {\n          this.read(dataURLToArrayBuffer(url));\n        } else {\n          this.clone();\n        }\n\n        return;\n      }\n\n      var xhr = new XMLHttpRequest();\n      var clone = this.clone.bind(this);\n      this.reloading = true;\n      this.xhr = xhr;\n      xhr.ontimeout = clone;\n      xhr.onabort = clone;\n      xhr.onerror = clone;\n\n      xhr.onprogress = function () {\n        if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n          xhr.abort();\n        }\n      };\n\n      xhr.onload = function () {\n        _this.read(xhr.response);\n      };\n\n      xhr.onloadend = function () {\n        _this.reloading = false;\n        _this.xhr = null;\n      }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n        url = addTimestamp(url);\n      }\n\n      xhr.open('GET', url);\n      xhr.responseType = 'arraybuffer';\n      xhr.withCredentials = element.crossOrigin === 'use-credentials';\n      xhr.send();\n    }\n  }, {\n    key: \"read\",\n    value: function read(arrayBuffer) {\n      var options = this.options,\n          imageData = this.imageData;\n      var orientation = resetAndGetOrientation(arrayBuffer);\n      var rotate = 0;\n      var scaleX = 1;\n      var scaleY = 1;\n\n      if (orientation > 1) {\n        // Generate a new Data URL with the orientation value set to 1\n        // as some iOS browsers will render image with its orientation\n        this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n        var _parseOrientation = parseOrientation(orientation);\n\n        rotate = _parseOrientation.rotate;\n        scaleX = _parseOrientation.scaleX;\n        scaleY = _parseOrientation.scaleY;\n      }\n\n      if (options.rotatable) {\n        imageData.rotate = rotate;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = scaleX;\n        imageData.scaleY = scaleY;\n      }\n\n      this.clone();\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var element = this.element,\n          url = this.url;\n      var crossOrigin;\n      var crossOriginUrl;\n\n      if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n        crossOrigin = element.crossOrigin;\n\n        if (crossOrigin) {\n          crossOriginUrl = url;\n        } else {\n          crossOrigin = 'anonymous'; // Bust cache when there is not a \"crossOrigin\" property\n\n          crossOriginUrl = addTimestamp(url);\n        }\n      }\n\n      this.crossOrigin = crossOrigin;\n      this.crossOriginUrl = crossOriginUrl;\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = crossOriginUrl || url;\n      this.image = image;\n      image.onload = this.start.bind(this);\n      image.onerror = this.stop.bind(this);\n      addClass(image, CLASS_HIDE);\n      element.parentNode.insertBefore(image, element.nextSibling);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      var image = this.isImg ? this.element : this.image;\n      image.onload = null;\n      image.onerror = null;\n      this.sizing = true;\n      var IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n      var done = function done(naturalWidth, naturalHeight) {\n        assign(_this2.imageData, {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: naturalWidth / naturalHeight\n        });\n        _this2.sizing = false;\n        _this2.sized = true;\n\n        _this2.build();\n      }; // Modern browsers (except Safari)\n\n\n      if (image.naturalWidth && !IS_SAFARI) {\n        done(image.naturalWidth, image.naturalHeight);\n        return;\n      }\n\n      var sizingImage = document.createElement('img');\n      var body = document.body || document.documentElement;\n      this.sizingImage = sizingImage;\n\n      sizingImage.onload = function () {\n        done(sizingImage.width, sizingImage.height);\n\n        if (!IS_SAFARI) {\n          body.removeChild(sizingImage);\n        }\n      };\n\n      sizingImage.src = image.src; // iOS Safari will convert the image automatically\n      // with its orientation once append it into DOM (#279)\n\n      if (!IS_SAFARI) {\n        sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n        body.appendChild(sizingImage);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var image = this.image;\n      image.onload = null;\n      image.onerror = null;\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  }, {\n    key: \"build\",\n    value: function build() {\n      if (!this.sized || this.ready) {\n        return;\n      }\n\n      var element = this.element,\n          options = this.options,\n          image = this.image; // Create cropper elements\n\n      var container = element.parentNode;\n      var template = document.createElement('div');\n      template.innerHTML = TEMPLATE;\n      var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n      var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n      var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n      var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n      var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n      this.container = container;\n      this.cropper = cropper;\n      this.canvas = canvas;\n      this.dragBox = dragBox;\n      this.cropBox = cropBox;\n      this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n      this.face = face;\n      canvas.appendChild(image); // Hide the original image\n\n      addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n      container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n      if (!this.isImg) {\n        removeClass(image, CLASS_HIDE);\n      }\n\n      this.initPreview();\n      this.bind();\n      options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n      options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n      options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n      addClass(cropBox, CLASS_HIDDEN);\n\n      if (!options.guides) {\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n      }\n\n      if (!options.center) {\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n      }\n\n      if (options.background) {\n        addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n      }\n\n      if (!options.highlight) {\n        addClass(face, CLASS_INVISIBLE);\n      }\n\n      if (options.cropBoxMovable) {\n        addClass(face, CLASS_MOVE);\n        setData(face, DATA_ACTION, ACTION_ALL);\n      }\n\n      if (!options.cropBoxResizable) {\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n      }\n\n      this.render();\n      this.ready = true;\n      this.setDragMode(options.dragMode);\n\n      if (options.autoCrop) {\n        this.crop();\n      }\n\n      this.setData(options.data);\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, {\n          once: true\n        });\n      }\n\n      dispatchEvent(element, EVENT_READY);\n    }\n  }, {\n    key: \"unbuild\",\n    value: function unbuild() {\n      if (!this.ready) {\n        return;\n      }\n\n      this.ready = false;\n      this.unbind();\n      this.resetPreview();\n      this.cropper.parentNode.removeChild(this.cropper);\n      removeClass(this.element, CLASS_HIDDEN);\n    }\n  }, {\n    key: \"uncreate\",\n    value: function uncreate() {\n      if (this.ready) {\n        this.unbuild();\n        this.ready = false;\n        this.cropped = false;\n      } else if (this.sizing) {\n        this.sizingImage.onload = null;\n        this.sizing = false;\n        this.sized = false;\n      } else if (this.reloading) {\n        this.xhr.onabort = null;\n        this.xhr.abort();\n      } else if (this.image) {\n        this.stop();\n      }\n    }\n    /**\n     * Get the no conflict cropper class.\n     * @returns {Cropper} The cropper class.\n     */\n\n  }], [{\n    key: \"noConflict\",\n    value: function noConflict() {\n      window.Cropper = AnotherCropper;\n      return Cropper;\n    }\n    /**\n     * Change the default options.\n     * @param {Object} options - The new default options.\n     */\n\n  }, {\n    key: \"setDefaults\",\n    value: function setDefaults(options) {\n      assign(DEFAULTS, isPlainObject(options) && options);\n    }\n  }]);\n\n  return Cropper;\n}();\n\nassign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\nexport default Cropper;\n","<template>\n  <eb-page>\n    <eb-navbar :title=\"title\" eb-back-link=\"Back\"></eb-navbar>\n    <eb-box ref=\"box\" @size=\"onSize\">\n      <img ref=\"image\" class=\"image\">\n    </eb-box>\n      <input ref=\"file\" type=\"file\" :accept=\"accept\" @change=\"onFileChange\" style=\"display: none;\" />\n      <f7-block>\n        <h3>{{fileName}}</h3>\n      </f7-block>\n      <f7-toolbar bottom-md>\n        <f7-button @click=\"onClickSelect\">{{selectText}}</f7-button>\n        <f7-button v-if=\"cropped\" @click=\"onClickClearCrop\">{{$text('Clear Crop')}}</f7-button>\n        <eb-button v-if=\"fileName\" active :onPerform=\"onPerformUpload\">{{$text('Upload')}}</eb-button>\n      </f7-toolbar>\n  </eb-page>\n</template>\n<script>\nimport Vue from 'vue';\nimport Cropper from 'cropperjs';\nconst ebPageContext = Vue.prototype.$meta.module.get('a-components').options.components.ebPageContext;\nexport default {\n  mixins: [ ebPageContext ],\n  data() {\n    return {\n      cropped: false,\n      fileName: null,\n    };\n  },\n  computed: {\n    mode() {\n      return this.contextParams && this.contextParams.mode || 2;\n    },\n    atomId() {\n      return this.contextParams && this.contextParams.atomId || 0;\n    },\n    attachment() {\n      return this.contextParams && this.contextParams.attachment || 0;\n    },\n    flag() {\n      return this.contextParams && this.contextParams.flag || '';\n    },\n    title() {\n      if (this.mode === 1) return this.$text('Upload Image');\n      else if (this.mode === 2) return this.$text('Upload File');\n      else if (this.mode === 3) return this.$text('Upload Audio');\n    },\n    selectText() {\n      if (this.mode === 1) return this.$text('Select Image');\n      else if (this.mode === 2) return this.$text('Select File');\n      else if (this.mode === 3) return this.$text('Select Audio');\n    },\n    accept() {\n      if (this.mode === 1) return 'image/*';\n      else if (this.mode === 2) return '';\n      else if (this.mode === 3) return 'audio/*';\n    },\n  },\n  mounted() {},\n  methods: {\n    createCropper() {\n      if (this.mode === 1) {\n        this._cropper = new Cropper(this.$refs.image, {\n          viewMode: 3,\n          checkOrientation: false,\n          autoCrop: false,\n          movable: false,\n          rotatable: false,\n          scalable: false,\n          zoomable: false,\n          toggleDragModeOnDblclick: false,\n          crop: () => {\n            this.cropped = true;\n          },\n        });\n      }\n    },\n    onSize(size) {\n      this.$$(this.$refs.box.$el).css({\n        height: `${size.height - 40}px`,\n      });\n      this.createCropper();\n    },\n    onClickSelect() {\n      this.$refs.file.click();\n    },\n    onFileChange(event) {\n      this.fileName = event.target.files[0].name;\n      if (this.mode === 1) {\n        const reader = new window.FileReader();\n        reader.onload = () => {\n          this._cropper.reset().replace(reader.result);\n        };\n        reader.readAsDataURL(event.target.files[0]);\n      }\n    },\n    onClickClearCrop() {\n      this._cropper.clear();\n      this.cropped = false;\n    },\n    onPerformUpload() {\n      const formData = new window.FormData();\n      formData.append('mode', this.mode);\n      formData.append('atomId', this.atomId);\n      formData.append('attachment', this.attachment);\n      formData.append('flag', this.flag);\n      if (this.mode === 1) {\n        formData.append('cropped', this.cropped);\n        if (this.cropped) {\n          const data = this._cropper.getData();\n          for (const key in data) {\n            data[key] = parseInt(data[key]);\n          }\n          formData.append('cropbox', JSON.stringify(data));\n        }\n      }\n      formData.append('file', this.$refs.file.files[0]);\n      return this.$api.post('file/upload', formData)\n        .then(data => {\n          this.contextCallback(200, data);\n          this.$f7router.back();\n        });\n    },\n  },\n};\n\n</script>\n<style lang=\"less\" scoped>\n.image {\n  max-width: 100%;\n}\n\n</style>\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=a3a708f2&scoped=true&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&id=a3a708f2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a3a708f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('eb-page',[_c('eb-navbar',{attrs:{\"title\":_vm.$text('test'),\"eb-back-link\":\"Back\"}}),_vm._v(\" \"),_c('f7-button',{on:{\"click\":_vm.onClick}},[_vm._v(\"test\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <eb-page>\n    <eb-navbar :title=\"$text('test')\" eb-back-link=\"Back\"></eb-navbar>\n    <f7-button @click=\"onClick\">test</f7-button>\n  </eb-page>\n</template>\n<script>\nexport default {\n  data() {\n    return {};\n  },\n  methods: {\n    onClick() {\n      this.$view.navigate('/a/file/file/upload', {\n        context: {\n          params: {\n            mode: 1,\n            atomId: 1,\n          },\n          callback: (code, data) => {\n            if (code === 200) {\n              console.log(data);\n            }\n          },\n        },\n      });\n    },\n  },\n};\n\n</script>\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./test.vue?vue&type=template&id=85bc74c4&\"\nimport script from \"./test.vue?vue&type=script&lang=js&\"\nexport * from \"./test.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}