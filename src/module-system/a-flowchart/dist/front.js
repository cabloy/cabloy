(()=>{var e={239:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>k});const i={meta:{global:!1},methods:{onAction:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.ctx,o=e.action,i=e.item,"getSchemaReference"!==o.name){n.next=7;break}return n.next=4,t.onAction_getSchemaReference({ctx:r,item:i});case 4:case 10:return n.abrupt("return",n.sent);case 7:if("schemaReference"!==o.name){n.next=11;break}return n.next=10,t.onAction_schemaReference({ctx:r,action:o,item:i});case 11:case"end":return n.stop()}}),n)})))()},onAction_getSchemaReference:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r,o,i,a,s,c,u,l,d,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.ctx,o=e.item,i=o.validate,a=i.host.container,s=a.diagram,c=a.id,u=t.__findNode_startEventAtom({diagram:s,nodeId:c})){n.next=9;break}return r.$view.toast.show({text:t.$text("NotFoundStartEventAtom")}),n.abrupt("return");case 9:if((l=u.options&&u.options.atom)&&l.module&&l.atomClassName){n.next=13;break}return r.$view.toast.show({text:t.$text("NotSetStartEventAtom")}),n.abrupt("return");case 13:return n.next=15,r.$api.post("/a/base/atom/validator",{atomClass:l});case 15:return d=n.sent,n.next=18,r.$api.post("/a/validation/validation/schema",{module:d.module,validator:d.validator,schema:null});case 18:return f=n.sent,n.abrupt("return",f);case 20:case"end":return n.stop()}}),n)})))()},onAction_schemaReference:function(e){var t=this;return o(regeneratorRuntime.mark((function n(){var r,o,i,a,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.ctx,o=e.action,i=e.item,n.next=3,t.onAction_getSchemaReference({ctx:r,action:o,item:i});case 3:if(a=n.sent){n.next=6;break}return n.abrupt("return");case 6:s=a.schema,void 0===(c=r.$meta.util.getProperty(o,"navigateOptions.target"))&&(c="_self"),r.$view.navigate("/a/jsoneditor/json/editor?t=".concat(Date.now()),{target:c,context:{params:{value:s,title:r.$text("ReferenceForHelp"),readOnly:!0}}});case 10:case"end":return n.stop()}}),n)})))()},__findNode_startEventAtom:function(e){var t=e.diagram,n=e.nodeId,r=t.contentProcess.nodes.find((function(e){return e.id===n}));if(!r)return null;for(var o={};;){if(r.type.indexOf("startEventAtom")>-1)return r;if(o[n]=!0,!(r=this.__findNode_previous({diagram:t,nodeId:n,nodeIdCaches:o})))return null;n=r.id}},__findNode_previous:function(e){var t=e.diagram,n=e.nodeId,r=e.nodeIdCaches,o=t.contentProcess.edges.find((function(e){return e.target===n&&!r[e.source]}));return o?t.contentProcess.nodes.find((function(e){return e.id===o.source})):null}}},a={props:{context:{type:Object}},data:function(){return{}},computed:{},created:function(){},methods:{onChooseAssignees:function(){var e=this,t=this.context.validate,n=t.host.container,r={flowDefId:n.flowDefId,nodeId:n.id},o=this.$meta.util.combineQueries("/a/flowchart/flowDef/assigneesEdit",r);this.$view.navigate(o,{target:"_self",context:{params:{context:this.context,readOnly:t.readOnly,value:this.context.getValue()},callback:function(t,n){200===t&&e.context.setValue(n)}}})}},render:function(){var e=arguments[0],t=this.context.dataPath,n=this.context.getTitle();return e("eb-list-item-choose",{attrs:{link:"#",dataPath:t,title:n},props:{onChoose:this.onChooseAssignees}})}};var s=n(3);function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}const u={mixins:[n.n(s)().prototype.$meta.module.get("a-base").options.mixins.ebModules],props:{context:{type:Object}},data:function(){return{flowServiceBases:null}},computed:{ebOptions:function(){if(!this.modulesAll||!this.flowServiceBases)return[];var e=[];for(var t in this.flowServiceBases){var n=this.modulesAll[t],r=this.flowServiceBases[t],o={title:n.titleLocale,options:[]};for(var i in e.push(o),r){var a=r[i].titleLocale,s="".concat(t,":").concat(i);o.options.push({title:a,value:s})}}return e}},created:function(){this.__init()},methods:{__init:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$local.dispatch("getFlowServiceBases");case 2:t.flowServiceBases=e.sent;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))})()}},render:function(){var e=arguments[0],t=this.context,n=t.parcel,r=t.key,o=t.property,i={ebPatch:{getValue:function(e){return e?"".concat(e.module,":").concat(e.name):""},setValue:function(e){if(!e)return null;var t=e.split(":");return t[0]&&t[1]?{module:t[0],name:t[1]}:null}}},a=this.$utils.extend({},o,{ebType:"select",ebOptions:this.ebOptions});return e("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:a,meta:i}})}};function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,s,"next",e)}function s(e){p(i,r,o,a,s,"throw",e)}a(void 0)}))}}var v=["#FF3B30","#FF9500","#9C27B0","#009688","#2196F3","#4CD964"];const g={props:{context:{type:Object}},data:function(){return{}},computed:{readOnly:function(){return this.context.validate.readOnly},container:function(){return this.context.validate.host.container},flowDefId:function(){return this.container.flowDefId},nodeId:function(){return this.container.id},diagram:function(){return this.container.diagram}},created:function(){},methods:{onItemClick:function(e,t){var n=this;return m(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={flowDefId:n.flowDefId,nodeId:n.nodeId,behaviorId:t.id},o=n.$meta.util.combineQueries("/a/flowchart/flowDef/behaviorEdit",r),n.$view.navigate(o,{target:"_self",context:{params:{context:n.context,readOnly:n.readOnly,value:t},callback:function(e,r){if(200===e){var o=n.context.getValue().concat();o[d(n._findBehavior(t.id),1)[0]]=r,n.context.setValue(o)}}}});case 3:case"end":return e.stop()}}),e)})))()},_findBehavior:function(e){var t=this.context.getValue(),n=t.findIndex((function(t){return t.id===e}));return[n,-1===n?null:t[n]]},_onActionDelete:function(e,t){var n=this;return m(regeneratorRuntime.mark((function r(){var o,i,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$view.dialog.confirm();case 2:n._deleteEdges(t.id),o=n.context.getValue(),i=n._findBehavior(t.id),a=d(i,1),s=a[0],o.splice(s,1),n.context.setValue(o),n.$meta.util.swipeoutClose(e.currentTarget);case 8:case"end":return r.stop()}}),r)})))()},_deleteEdges:function(e){var t=this,n=this.diagram.contentProcess.edges.filter((function(n){return n.source===t.nodeId&&n.behavior===e})).map((function(e){return e.id}));this.diagram.deleteEdges(n)},_onActionMoveUp:function(e,t){var n=this.context.getValue(),r=d(this._findBehavior(t.id),1)[0];if(r>0){var o=n.splice(r,1);n.splice(r-1,0,o[0]),this.context.setValue(n)}this.$meta.util.swipeoutClose(e.currentTarget)},_onActionMoveDown:function(e,t){var n=this.context.getValue(),r=d(this._findBehavior(t.id),1)[0];if(r<n.length-1){var o=n.splice(r+1,1);n.splice(r,0,o[0]),this.context.setValue(n)}this.$meta.util.swipeoutClose(e.currentTarget)},onSwipeoutOpened:function(){},onPerformAdd:function(){var e=this;this.$view.navigate("/a/flowchart/flowDef/behaviors",{target:"_self",context:{params:{diagram:this.diagram},callback:function(t,n){200===t&&n&&e._addBehavior(n)}}})},_addBehavior:function(e){var t=this.context.getValue()||[],n=this.__getAvailableBehaviorId(t,e),r=e.titleLocale||e.title,o=this.__getAvailableBehaviorColor(t);t.push({id:n,name:r,type:e.type,color:o}),this.context.setValue(t)},__getAvailableBehaviorId:function(e,t){var n,r=0,o=l(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.id){var a=parseInt(i.id.split("_")[1]||0);a>r&&(r=a)}}}catch(e){o.e(e)}finally{o.f()}return"".concat(t.type,"_").concat(r+1)},__getAvailableBehaviorColor:function(e){var t,n,r=l(v);try{var o=function(){var r=n.value;if(!e.some((function(e){return e.color===r})))return t=r,"break"};for(r.s();!(n=r.n()).done&&"break"!==o(););}catch(e){r.e(e)}finally{r.f()}return t||(t=this.__randomColor()),t},__randomColor:function(){var e=Math.floor(150*Math.random()+50),t=Math.floor(150*Math.random()+50),n=Math.floor(150*Math.random()+50);return("#"+e.toString(16)+t.toString(16)+n.toString(16)).toUpperCase()},_renderBehaviorMedia:function(e){var t=this.$createElement,n=this.diagram.behaviorBases[e.type],r=n.icon.material,o=n.icon.f7,i=n.icon.url;return r||o?t("f7-icon",{style:{color:e.color},attrs:{material:r,f7:o}}):t("img",{style:{color:e.color},class:"media-node-base-icon",attrs:{src:this.$meta.util.combineFetchStaticPath(i)}})},_renderTitle:function(){var e,t=this.$createElement;return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Behaviors")]),e])])},_renderBehavior:function(e){var t=this,n=this.$createElement,r=n("div",{slot:"media"},[this._renderBehaviorMedia(e)]),o=n("div",{slot:"title",class:"title"},[n("div",[e.name])]);return n("eb-list-item",{class:"item",key:e.id,attrs:{link:"#",swipeout:!0},props:{onPerform:function(n){return t.onItemClick(n,e)}},on:{swipeoutOpened:function(n){t.onSwipeoutOpened(n,e)},contextmenuOpened:function(n){t.onSwipeoutOpened(n,e)}}},[r,o,this._renderListItemContextMenu(e)])},_renderListItemContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o,i=[];("menu"===t||!t&&this.$device.desktop)&&(o=r("div",{slot:"title"},[this.$text("Delete")])),i.push(r("div",{key:"delete",attrs:{color:"red"},props:{onPerform:function(t){return n._onActionDelete(t,e)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::delete"}}),o]));var a,s,c=this.context.getValue(),u=d(this._findBehavior(e.id),1)[0];u>0&&(("menu"===t||!t&&this.$device.desktop)&&(a=r("div",{slot:"title"},[this.$text("Move Up")])),i.push(r("div",{key:"moveUp",attrs:{color:"teal"},props:{onPerform:function(t){return n._onActionMoveUp(t,e)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::arrow-up"}}),a]))),u<c.length-1&&(("menu"===t||!t&&this.$device.desktop)&&(s=r("div",{slot:"title"},[this.$text("Move Down")])),i.push(r("div",{key:"moveDown",attrs:{color:"teal"},props:{onPerform:function(t){return n._onActionMoveDown(t,e)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::arrow-down"}}),s])));var l=r("div",{slot:"right"},[i]);return r("eb-context-menu",{attrs:{mode:t}},[l])},_renderBehaviors:function(){var e=[],t=this.context.getValue();if(!t)return null;var n,r=l(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.push(this._renderBehavior(o))}}catch(e){r.e(e)}finally{r.f()}return e}},render:function(){var e=arguments[0];return e("div",[this._renderTitle(),this._renderBehaviors()])}},y={props:{context:{type:Object}},data:function(){return{}},computed:{},created:function(){},methods:{onSave:function(){return this.context.validate.perform(null,{action:"save"})},onChooseEditContent:function(){var e=this,t=this.context,n=t.parcel,r=t.validate;this.$view.navigate("/a/flowchart/flowDef/contentEdit",{target:r.readOnly?"_self":void 0,context:{params:{item:n.data,readOnly:r.readOnly,onSave:function(){return e.onSave()}},callback:function(t,n){200===t&&e.context.setValue(n.content)}}})}},render:function(){var e=arguments[0],t=this.context.dataPath,n=this.context.getTitle();return e("eb-list-item-choose",{attrs:{link:"#",dataPath:t,title:n},props:{onChoose:this.onChooseEditContent}})}},b={props:{context:{type:Object}},data:function(){return{}},computed:{ebOptions:function(){var e=this.context.validate.host.container,t=e.diagram,n=e.id,r=t.contentProcess.nodes.filter((function(e){return e.id!==n&&(e.type.indexOf("startEventAtom")>-1||e.type.indexOf("activityUserTask")>-1)})).map((function(e){return{title:e.nameLocale||e.name,value:e.id}}));return r.unshift({title:"Default",value:""}),r}},created:function(){},methods:{},render:function(){var e=arguments[0],t=this.context,n=t.parcel,r=t.key,o=t.property,i=this.$utils.extend({},o,{ebType:"select",ebOptions:this.ebOptions});return e("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:i}})}};function x(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){x(i,r,o,a,s,"next",e)}function s(e){x(i,r,o,a,s,"throw",e)}a(void 0)}))}}const _={props:{context:{type:Object}},data:function(){return{}},computed:{},created:function(){},methods:{getSchemaReference:function(){var e=this;return w(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:"getSchemaReference",actionModule:"a-flowchart",actionComponent:"actionUserTask"},t.next=3,e.$meta.util.performAction({ctx:e,action:n,item:e.context});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},onChooseSchemaFields:function(){var e=this;return w(regeneratorRuntime.mark((function t(){var n,r,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSchemaReference();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$meta.module.use(n.module);case 7:r=e.context.validate,o=r.host.container,i={flowDefId:o.flowDefId,nodeId:o.id},a=e.$meta.util.combineQueries("/a/flowchart/flowDef/schemaFields",i),e.$view.navigate(a,{target:"_self",context:{params:{context:e.context,readOnly:r.readOnly,value:e.context.getValue(),schemaReference:n},callback:function(t,n){200===t&&e.context.setValue(n)}}});case 12:case"end":return t.stop()}}),t)})))()}},render:function(){var e=arguments[0],t=this.context.dataPath,n=this.context.getTitle();return e("eb-list-item-choose",{attrs:{link:"#",dataPath:t,title:n},props:{onChoose:this.onChooseSchemaFields}})}},A={props:{context:{type:Object}},data:function(){return{}},computed:{ebOptions:function(){return this.context.validate.host.container.diagram.contentProcess.nodes.map((function(e){return{title:e.nameLocale||e.name,value:e.id}}))}},created:function(){},methods:{},render:function(){var e=arguments[0],t=this.context,n=t.parcel,r=t.key,o=t.property,i=this.$utils.extend({},o,{ebType:"select",ebOptions:this.ebOptions});return e("eb-list-item-validate",{attrs:{parcel:n,dataKey:r,property:i}})}};var P=n(623),$=n(601),S=n(250),O=n(770);const k={actionUserTask:i,renderAssignees:a,renderBeanFlowService:u,renderBehaviors:g,renderFlowDefContent:y,renderRejectedNode:b,renderSchemaFields:_,renderSelectNode:A,contentEditDiagram:P.Z,contentEditSource:$.Z,contentEditListener:S.Z,schemaFieldsTab:O.Z}},788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={flowDef:{default:{listener:"class Listener {\n  constructor(context) {\n    this.context = context;\n  }\n\n  async onFlowStart(options) {\n  }\n\n  async onFlowEnd(options) {\n  }\n\n  async onNodeEnter(contextNode) {\n  }\n\n  async onNodeBegin(contextNode) {\n  }\n\n  async onNodeDoing(contextNode) {\n  }\n\n  async onNodeEnd(contextNode) {\n  }\n\n  async onNodeLeave(contextNode) {\n  }\n\n  async onEdgeEnter(contextEdge, contextNode) {\n  }\n\n  async onEdgeTake(contextEdge, contextNode) {\n  }\n\n  async onEdgeLeave(contextEdge, contextNode) {\n  }\n}\n",process:{nodes:[],edges:[]}},groups:[{name:"startEvent",title:"Start Event"},{name:"endEvent",title:"End Event"},{name:"gateway",title:"Gateway"},{name:"activity",title:"Activity"}]},schema:{default:{base:{behavior:{id:"",name:"",type:"",color:""},node:{id:"",name:"",type:""},edge:{id:"",name:"",source:"",target:""}}}}}},933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={flowDefDiagramTitle:"Diagram",flowDefSourceTitle:"Source",flowDefListenerTitle:"Listener",EditInPCTip:"Please edit in PC",FlowInitiator:"Flow Initiator",NotFoundStartEventAtom:"Not Found: StartEvent of Data Draft",NotSetStartEventAtom:"Not Set: StartEvent of Data Draft"}},978:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={flowDefDiagramTitle:"流程图",flowDefSourceTitle:"源文件",flowDefListenerTitle:"监听器",EditInPCTip:"请在PC中编辑",Activity:"活动",Variable:"变量",Variables:"变量",Behavior:"行为",Behaviors:"行为",FlowInitiator:"流程发起人",NotFoundStartEventAtom:"未发现：数据起草开始事件",NotSetStartEventAtom:"未设置：数据起草开始事件",Gateway:"网关","Flow Chart":"流程图","Start Event":"开始事件","End Event":"结束事件","Field Permissions":"字段权限","Allow All Fields":"允许所有字段","Disable All Fields":"禁止所有字段","Allow Specific Fields":"允许指定字段","Select Fields":"选择字段","Move Up":"上移","Move Down":"下移","Add Node":"添加节点","Add Behavior":"添加行为"}},137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={"en-us":n(933).Z,"zh-cn":n(978).Z}},644:(e,t,n)=>{"use strict";function r(e){return n(142)("./".concat(e,".vue")).default}function o(e){return n(990)("./".concat(e,".jsx")).default}n.d(t,{Z:()=>i});const i=[{path:"flowDef/assigneesEdit",component:o("flowDef/assigneesEdit")},{path:"flowDef/behaviorEdit",component:o("flowDef/behaviorEdit")},{path:"flowDef/behaviors",component:o("flowDef/behaviors")},{path:"flowDef/contentEdit",component:r("flowDef/contentEdit")},{path:"flowDef/contentProcessView",component:r("flowDef/contentProcessView")},{path:"flowDef/nodes",component:o("flowDef/nodes")},{path:"flowDef/nodeProperties",component:o("flowDef/nodeProperties")},{path:"flowDef/schemaFields",component:r("flowDef/schemaFields")}]},81:(e,t,n)=>{"use strict";function r(e){return{state:{behaviorBases:null,nodeBases:null,edgeBases:null,flowServiceBases:null},getters:{},mutations:{setBehaviorBases:function(e,t){e.behaviorBases=t},setNodeBases:function(e,t){e.nodeBases=t},setEdgeBases:function(e,t){e.edgeBases=t},setFlowServiceBases:function(e,t){e.flowServiceBases=t}},actions:{getBehaviorBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.behaviorBases)return t(n.behaviorBases);e.prototype.$meta.api.post("/a/flow/flowDef/behaviorBases").then((function(e){r("setBehaviorBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))},getNodeBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.nodeBases)return t(n.nodeBases);e.prototype.$meta.api.post("/a/flow/flowDef/nodeBases").then((function(e){r("setNodeBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))},getEdgeBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.edgeBases)return t(n.edgeBases);e.prototype.$meta.api.post("/a/flow/flowDef/edgeBases").then((function(e){r("setEdgeBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))},getFlowServiceBases:function(t){var n=t.state,r=t.commit;return new Promise((function(t,o){if(n.flowServiceBases)return t(n.flowServiceBases);e.prototype.$meta.api.post("/a/flow/flowDef/flowServiceBases").then((function(e){r("setFlowServiceBases",e=e||{}),t(e)})).catch((function(e){o(e)}))}))}}}}n.d(t,{Z:()=>r})},623:(e,t,n)=>{"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>c});var s="behavior_0";const c={meta:{global:!1},props:{viewOnly:{type:Boolean,default:!1},readOnly:{type:Boolean},contentProcessStr:{type:String},tabActive:{type:Boolean},flowDefId:{type:Number},flowNodeDefIds:{type:Array}},data:function(){return{contentProcess:null,nodeBases:null,edgeBases:null,behaviorBases:null,x6:null,xlayout:null,graph:null,dagreLayout:null,size:{height:0,width:0},dirty:!1}},computed:{ready:function(){return this.x6&&this.xlayout&&this.nodeBases&&this.edgeBases&&this.behaviorBases}},watch:{contentProcessStr:function(){this.contentProcess=window.JSON5.parse(this.contentProcessStr),this.tabActive?this.__updateChart({changeData:!0}):this.dirty=!0},tabActive:function(){this.tabActive&&this.dirty&&(this.dirty=!1,this.__updateChart({changeData:!0}))}},created:function(){},mounted:function(){this.__init()},beforeDestroy:function(){this.graph&&(this.graph.dispose(),this.graph=null),this.dagreLayout&&(this.dagreLayout.destroy(),this.dagreLayout=null),this.$emit("diagram:destroy")},methods:{__init:function(){var e=this;return a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.contentProcess=window.JSON5.parse(e.contentProcessStr),t.next=3,e.__initResources();case 3:return t.next=5,e.__prepareInstances();case 5:return e.__registerNodes(),e.__registerEdges(),t.next=9,e.__updateChart({});case 9:e.$emit("contentEditDiagramInit");case 10:case"end":return t.stop()}}),t)})))()},__initResources:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=[]).push(e.$local.dispatch("getNodeBases").then((function(t){return e.nodeBases=t}))),n.push(e.$local.dispatch("getEdgeBases").then((function(t){return e.edgeBases=t}))),n.push(e.$local.dispatch("getBehaviorBases").then((function(t){return e.behaviorBases=t}))),t.next=6,Promise.all(n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()},__prepareInstances:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={actionModule:"a-antvx6",actionComponent:"x6",name:"instance"},(n=[]).push(e.__prepareInstance({action:r})),r={actionModule:"a-antvlayout",actionComponent:"layout",name:"instance"},n.push(e.__prepareInstance({action:r})),t.next=7,Promise.all(n);case 7:o=t.sent,e.x6=o[0],e.xlayout=o[1];case 10:case"end":return t.stop()}}),t)})))()},__prepareInstance:function(e){var t=this;return a(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.action,n.next=3,t.$meta.util.performAction({ctx:t,action:r});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},__updateChart:function(e){var t=this;return a(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.changeSize,o=e.changeData,t.ready){n.next=3;break}return n.abrupt("return");case 3:if(t.graph){n.next=6;break}return n.next=6,t.__createChart();case 6:if(r&&(t.graph.resize(t.size.width,t.size.height),t.graph.centerContent()),!o){n.next=13;break}return n.next=10,t.__createLayoutModel();case 10:i=n.sent,t.graph.fromJSON(i),t.graph.centerContent();case 13:case"end":return n.stop()}}),n)})))()},__createChart:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$refs.container,e.graph=new e.x6.Graph({container:n,grid:{size:10,visible:!0},width:e.size.width,height:e.size.height,background:{color:"#FFFFFF"},selecting:{enabled:!e.readOnly,multiple:!1,rubberband:!1,showNodeSelectionBox:!0,showEdgeSelectionBox:!0},scroller:{enabled:!0,pannable:!0,autoResize:!0},mousewheel:{enabled:!0,modifiers:["ctrl","meta"]},connecting:{snap:!0,allowBlank:!1,allowMulti:function(t){var n=t.sourceCell,r=t.sourcePort,o=t.targetCell;return!e.__checkEdgeExists(n.id,o.id,r)},allowLoop:!1,allowNode:!0,allowEdge:!1,allowPort:!1,highlight:!1,connector:"smooth",router:{name:"normal"},createEdge:function(t){var n=t.sourceCell,r=t.sourceMagnet.getAttribute("data-id"),o=e.__getBehaviorColor(n.id,r);return new e.x6.Shape.Edge({attrs:{line:{stroke:o,opacity:.4}}})}},interacting:function(){return!this.readOnly&&{nodeMovable:!0,magnetConnectable:!0,edgeMovable:!0,edgeLabelMovable:!1,arrowheadMovable:!0,vertexMovable:!1,vertexAddable:!1,vertexDeletable:!1}}}),e.__graphEvents(n),t.next=5,e.__createLayoutModel();case 5:r=t.sent,e.graph.fromJSON(r),e.graph.centerContent();case 8:case"end":return t.stop()}}),t)})))()},__graphEvents:function(){var e=this;this.viewOnly||(this.graph.on("edge:connected",(function(t){var n=t.isNew,r=t.edge;if(n){var o=r.getSourceCell(),i=r.getTargetCell(),a=r.getSource().port;e.addEdge(o.id,i.id,a)}})),this.graph.on("node:click",(function(t){var n=t.node;window.setTimeout((function(){e.showProperties({node:n})}),300)})),this.graph.on("edge:click",(function(t){var n=t.edge;window.setTimeout((function(){e.showProperties({edge:n})}),300)})))},__createLayoutModel:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dagreLayout||(n=e.size.width>e.size.height,e.dagreLayout=new e.xlayout.DagreLayout({type:"dagre",rankdir:n?"LR":"TB",align:void 0,nodesep:n?30:50,ranksep:n?70:50,controlPoints:!0})),t.next=3,e._combineContentProcessRender();case 3:return r=t.sent,t.abrupt("return",e.dagreLayout.layout(r));case 5:case"end":return t.stop()}}),t)})))()},_combineContentProcessRender:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n,o,i,a,s,c,u,l,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.contentProcess){t.next=2;break}return t.abrupt("return");case 2:n=[],o=r(e.contentProcess.nodes),t.prev=4,o.s();case 6:if((i=o.n()).done){t.next=14;break}return a=i.value,t.next=10,e.__createNode(a);case 10:s=t.sent,n.push(s);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:c=[],u=r(e.contentProcess.edges);try{for(u.s();!(l=u.n()).done;)d=l.value,f=e.__createEdge(d),c.push(f)}catch(e){u.e(e)}finally{u.f()}return t.abrupt("return",{nodes:n,edges:c});case 26:case"end":return t.stop()}}),t,null,[[4,16,19,22]])})))()},__getBehaviorIcon:function(e){var t=this;return a(regeneratorRuntime.mark((function n(){var r,o,i,a,s,c,u,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.behaviorBases[e.type],o=e.color?t.$meta.util.escapeURL(e.color):"",i=r.icon.material,a=r.icon.f7,s=r.icon.url,!i&&!a){n.next=10;break}return n.next=8,t.$meta.util.combineIcon({material:i,f7:a,color:o});case 8:return c=n.sent,n.abrupt("return",'<div class="eb-flowchart-node-icon">'.concat(c,"</div>"));case 10:return u=t.$meta.util.combineFetchStaticPath(s),l=t.$meta.util.escapeURL(u),n.abrupt("return",'<div class="eb-flowchart-node-icon">\n                <img src="'.concat(l,'" style="border: solid 1px ').concat(o,'" />\n              </div>'));case 13:case"end":return n.stop()}}),n)})))()},__createNodePorts:function(e){var t=this;return a(regeneratorRuntime.mark((function n(){var o,i,a,c,u,l,d,f,h,p,m,v,g,y;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.nodeBases[e.type],i=[],a=o.icon.material,c=o.icon.f7,u=o.icon.url,!a&&!c){n.next=12;break}return n.next=8,t.$meta.util.combineIcon({material:a,f7:c});case 8:d=n.sent,l='<div class="eb-flowchart-node-icon">'.concat(d,"</div>"),n.next=15;break;case 12:f=t.$meta.util.combineFetchStaticPath(u),h=t.$meta.util.escapeURL(f),l='<div class="eb-flowchart-node-icon">\n                      <img src="'.concat(h,'" />\n                    </div>');case 15:if(i.push({id:s,group:"out",attrs:{icon:{html:l}}}),!(p=e.behaviors)){n.next=37;break}m=r(p),n.prev=19,m.s();case 21:if((v=m.n()).done){n.next=29;break}return g=v.value,n.next=25,t.__getBehaviorIcon(g);case 25:y=n.sent,i.push({id:g.id,group:"out",attrs:{icon:{html:y,"data-id":g.id}}});case 27:n.next=21;break;case 29:n.next=34;break;case 31:n.prev=31,n.t0=n.catch(19),m.e(n.t0);case 34:return n.prev=34,m.f(),n.finish(34);case 37:return n.abrupt("return",{groups:{out:{markup:{tagName:"foreignObject",selector:"icon",attrs:{pointerEvents:"visiblePainted",magnet:!t.readOnly}},position:{name:"top",args:{dx:-12,dy:6}}}},items:i});case 38:case"end":return n.stop()}}),n,null,[[19,31,34,37]])})))()},__getBehaviorColor:function(e,t){var n;if(t){var r=this.__findBehavior(e,t);n=r?r.color:""}else n="#000";return n},__createNode:function(e){var t=this;return a(regeneratorRuntime.mark((function n(){var r,o,i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$meta.util.escapeHtml(e.nameLocale||e.name),o='<div class="eb-flowchart-node-label">\n                      <span>'.concat(r,"</span>\n                    </div>"),n.next=4,t.__createNodePorts(e);case 4:return i=n.sent,a={id:e.id,shape:"eb-flowchart-node",attrs:{label:{html:o}},ports:i},t.flowNodeDefIds&&t.flowNodeDefIds.indexOf(e.id)>-1&&(a.attrs.body={stroke:"orange",strokeWidth:4}),n.abrupt("return",a);case 8:case"end":return n.stop()}}),n)})))()},__createEdge:function(e){var t={cell:e.source,port:e.behavior},n=this.__getBehaviorColor(e.source,e.behavior);return{id:e.id,shape:"sequence",source:t,target:e.target,label:e.nameLocale||e.name,attrs:{line:{stroke:n,opacity:.6}}}},__registerEdges:function(){for(var e in this.edgeBases){var t=this.edgeBases[e],n=this.__registerEdge(t);this.x6.Graph.registerEdge(e,n,!0)}},__registerNodes:function(){var e=this.__registerNode();this.x6.Graph.registerNode("eb-flowchart-node",e,!0)},__registerEdge:function(){return{inherit:"edge",attrs:{line:{stroke:"#333333"}}}},__registerNode:function(){return{width:120,height:80,markup:[{tagName:"rect",selector:"body"},{tagName:"foreignObject",selector:"label"}],attrs:{body:{fill:"#ffffff",stroke:"#333333",strokeWidth:1,rx:6,ry:6,refWidth:"100%",refHeight:"100%",pointerEvents:"visiblePainted"},label:{y:24,refWidth:"100%"}}}},onSize:function(e){var t=this;return a(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.size.height=e.height,t.size.width=e.width,n.next=4,t.__updateChart({changeSize:!0});case 4:case"end":return n.stop()}}),n)})))()},onPerformAddNode:function(){this.ready&&this.$view.navigate("/a/flowchart/flowDef/nodes?flowDefId=".concat(this.flowDefId),{scene:"sidebar",sceneOptions:{side:"right",name:"flowChart",title:"Flow Chart"},context:{params:{diagram:this}}})},__findBehavior:function(e,t){return this.__findNode(e).behaviors.find((function(e){return e.id===t}))},__findNode:function(e){return this.contentProcess.nodes.find((function(t){return t.id===e}))},__findEdge:function(e){return this.contentProcess.edges.find((function(t){return t.id===e}))},showProperties:function(e){var t=e.node,n=e.edge,r={flowDefId:this.flowDefId,type:t?"node":"edge",id:t?t.id:n.id},o=this.$meta.util.combineQueries("/a/flowchart/flowDef/nodeProperties",r);this.$view.navigate(o,{scene:"sidebar",sceneOptions:{side:"right",name:"properties",title:"Properties"},context:{params:{diagram:this}}})},__checkEdgeExists:function(e,t,n){return n===s&&(n=null),this.contentProcess.edges.some((function(r){return e===r.source&&t===r.target&&(n||"")===(r.behavior||"")}))},addEdge:function(e,t,n){if(!this.__checkEdgeExists(e,t,n)){var r={id:this.__getAvailableId(null),source:e,target:t};n&&n!==s&&(r.behavior=n);var o=this.$meta.util.extend({},this.contentProcess);o.edges.push(r),this.$emit("contentChange",{type:"process",value:o})}},addNode:function(e){var t={id:this.__getAvailableId(e),name:e.titleLocale||e.title,type:e.type},n=this.$meta.util.extend({},this.contentProcess);n.nodes.push(t),this.$emit("contentChange",{type:"process",value:n})},deleteNode:function(e){var t,n=this.$meta.util.extend({},this.contentProcess),o=n.edges.filter((function(t){return t.target===e})),i=n.edges.filter((function(t){return t.source===e})),a=r(o.concat(i));try{var s=function(){var e=t.value,r=n.edges.findIndex((function(t){return t.id===e.id}));r>-1&&n.edges.splice(r,1)};for(a.s();!(t=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}var c=n.nodes.findIndex((function(t){return t.id===e}));c>-1&&n.nodes.splice(c,1),this.$emit("contentChange",{type:"process",value:n})},deleteEdges:function(e){var t,n=this.$meta.util.extend({},this.contentProcess),o=r(e);try{var i=function(){var e=t.value,r=n.edges.findIndex((function(t){return t.id===e}));r>-1&&n.edges.splice(r,1)};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}this.$emit("contentChange",{type:"process",value:n})},deleteEdge:function(e){var t=this.$meta.util.extend({},this.contentProcess),n=t.edges.findIndex((function(t){return t.id===e}));n>-1&&t.edges.splice(n,1),this.$emit("contentChange",{type:"process",value:t})},__dataChange:function(e,t,n){var r=this.$meta.util.extend({},this.contentProcess);if("node"===e){var o=r.nodes.findIndex((function(e){return e.id===t}));r.nodes.splice(o,1,n)}else{var i=r.edges.findIndex((function(e){return e.id===t}));r.edges.splice(i,1,n)}this.$emit("contentChange",{type:"process",value:r})},__getAvailableId:function(e){var t,n=0,o=r(e?this.contentProcess.nodes:this.contentProcess.edges);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i.id){var a=parseInt(i.id.split("_")[1]||0);a>n&&(n=a)}}}catch(e){o.e(e)}finally{o.f()}return e?"".concat(e.type,"_").concat(n+1):"edge_".concat(n+1)}},render:function(){var e=arguments[0];return e("div",[e("eb-box",{ref:"box",on:{size:this.onSize},attrs:{header:!0,subnavbar:!this.viewOnly},class:"eb-box-iframe"},[e("div",{ref:"container"})])])}}},250:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}n.d(t,{Z:()=>o}),n(3);const o={meta:{global:!1},props:{readOnly:{type:Boolean},contentListener:{type:String},onSave:{type:Function}},data:function(){return{ready:!1}},created:function(){var e=this;this.onInputDelay=this.$meta.util.debounce((function(t){e._onInputDelay(t)}),500)},methods:{reload:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$meta.module.use("a-jsoneditor");case 2:t.ready=!0;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))})()},onSaveEditor:function(){this.onSave()},onInput:function(e){this.onInputDelay(e)},_onInputDelay:function(e){try{this.$emit("contentChange",{type:"listener",value:e})}catch(e){this.$view.toast.show({text:e.message})}}},render:function(){var e=arguments[0];return this.ready?e("eb-json-editor",{ref:"jsonEditor",attrs:{readOnly:this.readOnly,valueType:"string",valueMode:"js",value:this.contentListener},on:{input:this.onInput,save:this.onSaveEditor}}):e("div")}}},601:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}n.d(t,{Z:()=>o});const o={meta:{global:!1},props:{readOnly:{type:Boolean},contentProcessStr:{type:String},onSave:{type:Function}},data:function(){return{ready:!1}},created:function(){},methods:{reload:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$meta.module.use("a-jsoneditor");case 2:t.ready=!0;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))})()},onSaveEditor:function(){this.onSave()},onInput:function(e){try{var t=window.JSON5.parse(e);this.$emit("contentChange",{type:"process",value:t,valueStr:e})}catch(e){this.$view.toast.show({text:e.message})}}},render:function(){var e=arguments[0];return this.ready?e("eb-json-editor",{ref:"jsonEditor",attrs:{readOnly:this.readOnly,valueType:"string",value:this.contentProcessStr},on:{input:this.onInput,save:this.onSaveEditor}}):e("div")}}},770:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}n.d(t,{Z:()=>i}),n(3);const i={meta:{global:!1},props:{context:{type:Object},readOnly:{type:Boolean},mode:{type:String},valueSchema:{type:Object},schemaReference:{type:Object}},data:function(){return{valueMode:0,valueModes:[{title:"Allow All Fields",value:1},{title:"Disable All Fields",value:2},{title:"Allow Specific Fields",value:3},{title:"Custom",value:4}],valueMode4:null}},computed:{mode3SelectValue:function(){return 3!==this.valueMode?null:this.valueSchema[this.mode].map((function(e){return e&&"object"===o(e)?e.name:e}))},mode3Items:function(){var e=this;if(3!==this.valueMode)return null;var t=this.valueSchema[this.mode],n=this.schemaReference.schema.properties;return t.map((function(t){var r=t&&"object"===o(t),i=r?t.name:t,a=n[i];return{key:i,title:r&&t.property.ebTitle?e.__getPropertyTitle({key:i,property:t.property}):a?e.__getPropertyTitle({key:i,property:a}):i,icon:{f7:r&&t.property.ebType?"group-flatten"===t.property.ebType||"group"===t.property.ebType?"::menu":"::radio-button-unchecked":!a||"group-flatten"!==a.ebType&&"group"!==a.ebType?"::radio-button-unchecked":"::menu"}}}))},mode3SelectOptions:function(){var e=[],t=this.schemaReference.schema.properties;for(var n in t){var r=t[n],o=this.__getPropertyTitle({key:n,property:r});e.push({title:o,value:n})}return e}},created:function(){var e=this;this._onInputValueMode4Delay=this.$meta.util.debounce((function(t){e.__onInputValueMode4Delay(t)}),1e3),this.__init()},methods:{__init:function(){this.__init_valueMode()},__init_valueMode:function(){var e=this.valueSchema[this.mode];e?!0===e?this.valueMode=1:Array.isArray(e)?this.valueMode=3:(this.valueMode=4,this.valueMode4=window.JSON5.stringify(e,null,2)):this.valueMode=2},onInputMode:function(e){e=parseInt(e),this.valueMode=e;var t,n=this.valueSchema[this.mode];1===e?t=!0:2===e?t=!1:3===e?Array.isArray(n)||(t=[]):4===e&&(this.valueMode4=window.JSON5.stringify(n,null,2)),void 0!==t&&(this.valueSchema[this.mode]=t)},__getPropertyTitle:function(e){var t=e.key,n=e.property,r=n.ebTitle?this.$text(n.ebTitle):t;return"group-flatten"===n.ebType||"group"===n.ebType?"-- ".concat(r," --"):r},__findProperty:function(e){var t=e.key,n=this.valueSchema[this.mode],r=n.findIndex((function(e){return e===t||e&&e.name===t}));return[r,-1===r?null:n[r]]},onInputMode3:function(e){var t,n,o=this.valueSchema[this.mode],i=this.schemaReference.schema.properties;for(var a in i){var s=e.indexOf(a),c=(t=this.__findProperty({key:a}),n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];s>-1&&-1===c?o.push(a):-1===s&&c>-1&&o.splice(c,1)}},onPerformRemoveMode3:function(e,t,n){this.valueSchema[this.mode].splice(n,1),this.$meta.util.swipeoutClose(e.currentTarget)},onPerformMoveUpMode3:function(e,t,n){var r=this.valueSchema[this.mode];if(n>0){var o=r.splice(n,1);r.splice(n-1,0,o[0])}this.$meta.util.swipeoutClose(e.currentTarget)},onPerformMoveDownMode3:function(e,t,n){var r=this.valueSchema[this.mode];if(n<r.length-1){var o=r.splice(n+1,1);r.splice(n,0,o[0])}this.$meta.util.swipeoutClose(e.currentTarget)},onInputValueMode4:function(e){this.valueMode4=e,this._onInputValueMode4Delay(e)},__onInputValueMode4Delay:function(e){try{this.valueSchema[this.mode]=window.JSON5.parse(e)}catch(e){this.$view.toast.show({text:e.message})}},renderMode_3_item:function(e,t){var n=this.$createElement,r=n("f7-icon",{attrs:{material:e.icon&&e.icon.material,f7:e.icon&&e.icon.f7},slot:"media"}),o=n("div",{slot:"title",class:"title"},[n("div",[e.title])]);return n("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[r,o,this.renderMode_3_itemContextMenu(e,t)])},renderMode_3_itemContextMenu_left:function(e,t){var n=this,r=this.$createElement,o=[];return o.push(r("div",{key:"moveUp",attrs:{color:"teal"},props:{onPerform:function(r){return n.onPerformMoveUpMode3(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::arrow-up"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Move Up")])])),o.push(r("div",{key:"moveDown",attrs:{color:"blue"},props:{onPerform:function(r){return n.onPerformMoveDownMode3(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::arrow-down"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Move Down")])])),r("div",{slot:"left"},[o])},renderMode_3_itemContextMenu_right:function(e,t){var n=this,r=this.$createElement,o=[];return o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemoveMode3(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])])),r("div",{slot:"right"},[o])},renderMode_3_itemContextMenu:function(e,t){var n=this.$createElement;return this.readOnly?null:n("eb-context-menu",[this.renderMode_3_itemContextMenu_left(e,t),this.renderMode_3_itemContextMenu_right(e,t)])},renderMode_3:function(){var e,t=this.$createElement;if(3!==this.valueMode)return null;this.readOnly||(e=t("f7-list-item",{attrs:{"group-title":!0}},[t("f7-list-item",{attrs:{smartSelect:!0,title:this.$text("Select Fields"),smartSelectParams:{openIn:"page",closeOnSelect:!1,formatValueText:function(){return null}}}},[t("eb-select",{attrs:{name:"mode3Select",value:this.mode3SelectValue,multiple:!0,options:this.mode3SelectOptions},on:{input:this.onInputMode3},props:{onGetDisplays:function(){return null}}})])]));for(var n=[],r=0;r<this.mode3Items.length;r++)n.push(this.renderMode_3_item(this.mode3Items[r],r));return t("f7-list-group",[e,n])},renderMode_4:function(){var e=this.$createElement;return 4!==this.valueMode?null:e("f7-list-group",[e("f7-list-item",[e("eb-input",{slot:"inner",attrs:{type:"textarea",readonly:this.readOnly,resizable:!0,value:this.valueMode4},style:{width:"100%"},class:"json-textarea",on:{input:this.onInputValueMode4}})])])}},render:function(){var e=arguments[0];return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0}},[e("f7-list-group",[e("f7-list-item",{attrs:{smartSelect:!this.readOnly,title:this.$text("Mode"),smartSelectParams:{openIn:"sheet",closeOnSelect:!0}}},[e("eb-select",{attrs:{readOnly:this.readOnly,name:"mode",value:this.valueMode,multiple:!1,options:this.valueModes},on:{input:this.onInputMode}})])]),this.renderMode_3(),this.renderMode_4()])}}},37:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(3),o=n.n(r);const i={props:{readOnly:{type:Boolean},assignees:{type:Object}},data:function(){return{}},methods:{onPerformAdd:function(){if(!this.assignees.vars.find((function(e){return"flowUser"===e.name}))){var e={name:"flowUser",title:"FlowInitiator",titleLocale:this.$text("FlowInitiator")};this.assignees.vars.push(e)}},onPerformRemove:function(e,t,n){this.assignees.vars.splice(n,1),this.$meta.util.swipeoutClose(e.currentTarget)},_renderAssignee:function(e,t){var n=this.$createElement,r=n("div",{slot:"title",class:"title"},[n("div",[e.titleLocale])]);return n("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[r,this._renderAssigneeContextMenu(e,t)])},_renderAssigneeContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o=[];o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemove(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])]));var i=r("div",{slot:"right"},[o]);return r("eb-context-menu",[i])},renderAssignees:function(){for(var e=[],t=this.assignees.vars,n=0;n<t.length;n++)e.push(this._renderAssignee(t[n],n));return e}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-group",[t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Variables")]),e])]),this.renderAssignees()])}};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const s={props:{readOnly:{type:Boolean},assignees:{type:Object},host:{type:Object}},data:function(){return{}},methods:{onPerformAdd:function(){var e=this;this.$view.navigate("/a/baseadmin/role/select",{target:"_self",context:{params:{roleIdStart:null,multiple:!0,roleTypes:[0,1,2,3,4]},callback:function(t,n){if(200===t&&n){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(n);try{var i=function(){var t=r.value;e.assignees.roles.find((function(e){return e.id===t.itemId}))||e.assignees.roles.push(t)};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}}}}})},onPerformRemove:function(e,t,n){this.assignees.roles.splice(n,1),this.$meta.util.swipeoutClose(e.currentTarget)},_renderAssignee:function(e,t){var n=this.$createElement,r=n("div",{slot:"title",class:"title"},[n("div",[e.roleName])]);return n("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[r,this._renderAssigneeContextMenu(e,t)])},_renderAssigneeContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o=[];o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemove(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])]));var i=r("div",{slot:"right"},[o]);return r("eb-context-menu",[i])},renderAssignees:function(){for(var e=[],t=this.assignees.roles,n=0;n<t.length;n++)e.push(this._renderAssignee(t[n],n));return e}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-group",[t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Roles")]),e])]),this.renderAssignees()])}},c={props:{readOnly:{type:Boolean},assignees:{type:Object},host:{type:Object}},data:function(){return{}},methods:{onPerformAdd:function(){var e=this;this.$view.navigate("/a/baseadmin/user/select",{target:"_self",context:{params:{onFetchUsers:function(t){var n=t.query,r=t.page;return e.$api.post("/a/flowchart/flowDef/userSelect",{host:e.host,params:{query:n,page:r}})}},callback:function(t,n){200===t&&(e.assignees.users.find((function(e){return e.id===n.id}))||e.assignees.users.push(n))}}})},onPerformRemove:function(e,t,n){this.assignees.users.splice(n,1),this.$meta.util.swipeoutClose(e.currentTarget)},getItemMedia:function(e){var t=e.avatar||this.$meta.config.modules["a-base"].user.avatar.default;return this.$meta.util.combineImageUrl(t,32)},_renderAssignee:function(e,t){var n,r,o=this.$createElement,i=o("div",{slot:"media"},[o("img",{class:"avatar avatar32",attrs:{src:this.getItemMedia(e)}})]),a=o("div",{slot:"title",class:"title"},[o("div",[e.userName])]);e.realName&&e.realName!==e.userName&&(n=o("f7-badge",[e.realName])),e.mobile&&(r=o("f7-badge",[e.mobile]));var s=o("div",{slot:"after"},[n,r]);return o("eb-list-item",{class:"item",key:t,attrs:{swipeout:!this.readOnly}},[i,a,s,this._renderAssigneeContextMenu(e,t)])},_renderAssigneeContextMenu:function(e,t){var n=this,r=this.$createElement;if(this.readOnly)return null;var o=[];o.push(r("div",{key:"remove",attrs:{color:"red"},props:{onPerform:function(r){return n.onPerformRemove(r,e,t)}}},[r("f7-icon",{slot:"media",attrs:{f7:"::delete"}}),this.$device.desktop&&r("div",{slot:"title"},[this.$text("Remove")])]));var i=r("div",{slot:"right"},[o]);return r("eb-context-menu",[i])},renderAssignees:function(){for(var e=[],t=this.assignees.users,n=0;n<t.length;n++)e.push(this._renderAssignee(t[n],n));return e}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::add"},props:{onPerform:this.onPerformAdd}})),t("f7-list-group",[t("f7-list-item",{attrs:{"group-title":!0}},[t("div",{class:"display-flex justify-content-space-between"},[t("div",[this.$text("Users")]),e])]),this.renderAssignees()])}};function u(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)}))}}const d={mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,o().prototype.$meta.module.get("a-components").options.mixins.ebPageDirty],components:{assigneesVars:i,assigneesRoles:s,assigneesUsers:c},data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),nodeId:this.$f7route.query.nodeId,assignees:null,ready:!1}},computed:{context:function(){return this.contextParams.context},readOnly:function(){return this.contextParams.readOnly},value:function(){return this.contextParams.value},host:function(){return{flowDefId:this.flowDefId,nodeDefId:this.nodeId}},page_title:function(){return this.page_getDirtyTitle(this.$text("Assignees"))}},watch:{assignees:{handler:function(){this.ready&&this.page_setDirty(!0)},deep:!0}},created:function(){this.__load()},methods:{__load:function(){var e=this;return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.__normalizeAssignees();case 2:e.ready=!0;case 3:case"end":return t.stop()}}),t)})))()},__normalizeAssignees:function(){var e=this;return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/a/flowchart/flowDef/normalizeAssignees",{host:e.host,assignees:e.value});case 2:e.assignees=t.sent;case 3:case"end":return t.stop()}}),t)})))()},onPerformDone:function(){var e={};this.assignees.users.length>0&&(e.users=this.assignees.users.map((function(e){return{id:e.id,userName:e.userName}}))),this.assignees.roles.length>0&&(e.roles=this.assignees.roles.map((function(e){return{id:e.id,roleName:e.roleName}}))),this.assignees.vars.length>0&&(e.vars=this.assignees.vars.map((function(e){return e.name}))),this.contextCallback(200,e),this.page_setDirty(!1),this.$f7router.back()},renderAssignees:function(){var e=this.$createElement;if(this.ready)return e("eb-list",{attrs:{form:!0,"inline-labels":!0,"no-hairlines-md":!0}},[e("assignees-vars",{attrs:{readOnly:this.readOnly,assignees:this.assignees}}),e("assignees-roles",{attrs:{readOnly:this.readOnly,assignees:this.assignees,host:this.host}}),e("assignees-users",{attrs:{readOnly:this.readOnly,assignees:this.assignees,host:this.host}})])}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::done"},props:{onPerform:this.onPerformDone}})),t("eb-page",[t("eb-navbar",{attrs:{title:this.page_title,"eb-back-link":"Back"}},[t("f7-nav-right",[e])]),this.renderAssignees()])}}},249:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(3),o=n.n(r);function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}var s=o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,c=o().prototype.$meta.module.get("a-components").options.mixins.ebPageDirty,u={type:"object",properties:{__groupBasic:{ebType:"group-flatten",ebTitle:"Basic"},id:{type:"string",ebType:"text",ebTitle:"ID",ebReadOnly:!0},name:{type:"string",ebType:"text",ebTitle:"Name",notEmpty:!0},type:{type:"string",ebType:"text",ebTitle:"Type",ebReadOnly:!0},color:{type:"string",ebType:"colorPicker",ebTitle:"Color",notEmpty:!0}}};const l={mixins:[s,c],data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),nodeId:this.$f7route.query.nodeId,behaviorId:this.$f7route.query.behaviorId,data:null,ready:!1}},computed:{context:function(){return this.contextParams.context},readOnly:function(){return this.contextParams.readOnly},value:function(){return this.contextParams.value},diagram:function(){return this.context.validate.host.container.diagram},page_title:function(){var e=this.$text("Behavior");return this.page_getDirtyTitle(e)}},created:function(){this.__load()},beforeDestroy:function(){this._unwatch&&(this._unwatch(),this._unwatch=null)},methods:{__load:function(){var e=this;return a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.__initData(),t.next=3,e.__initSchema();case 3:e.ready=!0;case 4:case"end":return t.stop()}}),t)})))()},__initData:function(){var e=this,t=this.value.type,n=this.$meta.util.extend({},this.$config.schema.default.base.behavior),r=this.diagram.behaviorBases[t].options.default;r&&(n.options=r),this.data=this.$meta.util.extend({},n,this.value),this._unwatch=this.$watch("data",(function(){e.page_setDirty(!0)}),{deep:!0})},__initSchema:function(){var e=this;return a(regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.diagram.behaviorBases[e.data.type],r=u,!n.validator){t.next=6;break}return t.next=5,e.$api.post("/a/validation/validation/schema",{module:n.validator.module,validator:n.validator.validator,schema:null});case 5:o=t.sent;case 6:o&&(i={type:"object",properties:{options:{type:"object",ebType:"group",ebTitle:"Options",properties:o.schema.properties}}},r=e.$meta.util.extend({},r,i)),e.schema={module:n.validator?n.validator.module:"a-flowchart",validator:n.validator?n.validator.validator:null,schema:r};case 8:case"end":return t.stop()}}),t)})))()},onPerformDone:function(){this.contextCallback(200,this.data),this.page_setDirty(!1),this.$f7router.back()},_renderProperties:function(){var e=this,t=this.$createElement;if(this.ready){var n={container:this},r={schema:this.schema,properties:{type:{ebPatch:{getValue:function(t){return e.diagram.behaviorBases[t].titleLocale}}}}};return t("eb-validate",{ref:"validate",attrs:{readOnly:this.readOnly,auto:!0,data:this.data,meta:r,host:n}})}}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::done"},props:{onPerform:this.onPerformDone}})),t("eb-page",[t("eb-navbar",{attrs:{title:this.page_title,"eb-back-link":"Back"}},[t("f7-nav-right",[e])]),this._renderProperties()])}}},373:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(3);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={mixins:[n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{}},computed:{ready:function(){return this.nodeBases},diagram:function(){return this.contextParams.diagram},behaviorBases:function(){var e=[];for(var t in this.diagram.behaviorBases)if(-1!==t.indexOf(":")&&"a-flow:base"!==t){var n=this.diagram.behaviorBases[t];e.push(a({type:t},n))}return e}},created:function(){},methods:{getNodeMedia:function(e){return this.$meta.util.combineFetchStaticPath(e.icon)},onItemClick:function(e,t){this.contextCallback(200,t),this.$f7router.back()},_renderBehaviorMedia:function(e){var t=this.$createElement,n=e.icon.material,r=e.icon.f7,o=e.icon.url;return n||r?t("f7-icon",{attrs:{color:e.color,material:n,f7:r}}):t("img",{style:{color:e.color},class:"media-node-base-icon",attrs:{src:this.$meta.util.combineFetchStaticPath(o)}})},_renderItem:function(e){var t=this,n=this.$createElement,r=n("div",{slot:"media"},[this._renderBehaviorMedia(e)]),o=n("div",{slot:"title",class:"title"},[n("div",[e.titleLocale])]);return n("eb-list-item",{class:"item",key:e.type,attrs:{link:"#"},props:{onPerform:function(n){return t.onItemClick(n,e)}}},[r,o])},_renderItems:function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(this.behaviorBases);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(this._renderItem(r))}}catch(e){n.e(e)}finally{n.f()}return t}},render:function(){var e=arguments[0];return e("eb-page",[e("eb-navbar",{attrs:{title:this.$text("Add Behavior"),"eb-back-link":"Back"}}),e("f7-list",[this._renderItems()])])}}},887:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(3);function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}var a=n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext,s={type:"object",properties:{__groupBasic:{ebType:"group-flatten",ebTitle:"Basic"},id:{type:"string",ebType:"text",ebTitle:"ID",ebReadOnly:!0},name:{type:"string",ebType:"text",ebTitle:"Name",notEmpty:!0},type:{type:"string",ebType:"text",ebTitle:"Type",ebReadOnly:!0},__groupBehaviors:{ebType:"group-flatten",ebTitle:"Behaviors",ebParams:{titleHidden:!0}},behaviors:{type:"array",ebType:"component",ebTitle:"Behaviors",ebRender:{module:"a-flowchart",name:"renderBehaviors"}}}},c={type:"object",properties:{__groupBasic:{ebType:"group-flatten",ebTitle:"Basic"},id:{type:"string",ebType:"text",ebTitle:"ID",ebReadOnly:!0},name:{type:"string",ebType:"text",ebTitle:"Name",notEmpty:!0},source:{type:"string",ebType:"text",ebTitle:"Source",ebReadOnly:!0,notEmpty:!0},target:{type:"string",ebType:"text",ebTitle:"Target",ebReadOnly:!0,notEmpty:!0},behavior:{type:"string",ebType:"text",ebTitle:"Behavior",ebReadOnly:!0,notEmpty:!0,ebDisplay:{expression:'typeof behavior!=="undefined"'}}}};const u={mixins:[a],data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),type:this.$f7route.query.type,id:this.$f7route.query.id,nodeBases:null,edgeBases:null,data:null,schema:null}},computed:{ready:function(){return this.nodeBases&&this.edgeBases&&this.data&&this.schema},diagram:function(){return this.contextParams.diagram},readOnly:function(){return this.diagram.readOnly}},created:function(){this.__load()},mounted:function(){this.diagram.$on("diagram:destroy",this.onDiagramDestroy)},beforeDestroy:function(){this.diagram.$off("diagram:destroy",this.onDiagramDestroy),this._unwatch&&(this._unwatch(),this._unwatch=null)},methods:{__load:function(){var e=this;return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$local.dispatch("getNodeBases");case 2:return e.nodeBases=t.sent,t.next=5,e.$local.dispatch("getEdgeBases");case 5:return e.edgeBases=t.sent,e.__initData(),t.next=9,e.__initSchema();case 9:case"end":return t.stop()}}),t)})))()},__initData:function(){var e=this,t="node"===this.type?this.diagram.__findNode(this.id):this.diagram.__findEdge(this.id),n=this.$meta.util.extend({},"node"===this.type?this.$config.schema.default.base.node:this.$config.schema.default.base.edge),r=("node"===this.type?this.nodeBases[t.type]:this.edgeBases.sequence).options.default;r&&(n.options=r),this.data=this.$meta.util.extend({},n,t),this._unwatch=this.$watch("data",(function(){e.__dataChange()}),{deep:!0})},__initSchema:function(){var e=this;return i(regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="node"===e.type?e.nodeBases[e.data.type]:e.edgeBases.sequence,r="node"===e.type?s:c,!n.validator){t.next=6;break}return t.next=5,e.$api.post("/a/validation/validation/schema",{module:n.validator.module,validator:n.validator.validator,schema:null});case 5:o=t.sent;case 6:o&&(i={type:"object",properties:{options:{type:"object",ebType:"group",ebTitle:"Options",properties:o.schema.properties}}},r=e.$meta.util.extend({},r,i)),e.schema={module:n.validator?n.validator.module:"a-flowchart",validator:n.validator?n.validator.validator:null,schema:r};case 8:case"end":return t.stop()}}),t)})))()},onDiagramDestroy:function(){this.$view.close()},onPerformDelete:function(){var e=this;return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$view.dialog.confirm();case 2:"node"===e.type?e.diagram.deleteNode(e.id):e.diagram.deleteEdge(e.id),e.$view.close();case 4:case"end":return t.stop()}}),t)})))()},__getPageTitle:function(){return this.data?"".concat(this.$text("Properties"),": ").concat(this.data.nameLocale||this.data.name||this.data.id):this.$text("Properties")},__dataChange:function(){this.diagram.__dataChange(this.type,this.id,this.data)},__getHost:function(){return{flowDefId:this.flowDefId,diagram:this.diagram}},renderList:function(){var e=this,t=this.$createElement;if(this.ready){var n={container:this},r={schema:this.schema,properties:{type:{ebPatch:{getValue:function(t){return("node"===e.type?e.nodeBases[t]:e.edgeBases.sequence).titleLocale}}}}};return"edge"===this.type&&(r.properties.source=r.properties.target={ebPatch:{getValue:function(t){var n=e.diagram.__findNode(t);return n.nameLocale||n.name}}},r.properties.behavior={ebPatch:{getValue:function(t){var n=e.diagram.__findBehavior(e.data.source,t);return n?n.nameLocale||n.name:null}}}),t("eb-validate",{ref:"validate",attrs:{readOnly:this.readOnly,auto:!0,data:this.data,meta:r,host:n}})}}},render:function(){var e,t=arguments[0];return this.readOnly||(e=t("eb-link",{attrs:{iconF7:"::delete"},props:{onPerform:this.onPerformDelete}})),t("eb-page",[t("eb-navbar",{attrs:{title:this.__getPageTitle(),"eb-back-link":"Back"}},[t("f7-nav-right",[e])]),this.renderList()])}}},453:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(3);function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const l={mixins:[n.n(r)().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{nodeBases:null}},computed:{ready:function(){return this.nodeBases},diagram:function(){return this.contextParams.diagram},nodeBasesGroups:function(){var e,t=this.$config.flowDef.groups,n=this.$meta.util.extend([],t),r=c(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;for(var i in o.titleLocale=this.$text(o.title),o.items=[],this.nodeBases)if(-1!==i.indexOf(":")){var s=this.nodeBases[i];s.group===o.name&&o.items.push(a({type:i},s))}}}catch(e){r.e(e)}finally{r.f()}return n}},created:function(){this.__load()},mounted:function(){this.diagram.$on("diagram:destroy",this.onDiagramDestroy)},beforeDestroy:function(){this.diagram.$off("diagram:destroy",this.onDiagramDestroy)},methods:{__load:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$local.dispatch("getNodeBases");case 2:t.nodeBases=e.sent;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))})()},onDiagramDestroy:function(){this.$view.close()},onPerformNode:function(e,t){this.diagram.addNode(t),this.$view.inPanel()||this.$f7router.back()},_renderNodeMedia:function(e){var t=e.item,n=this.$createElement,r=t.icon.material,o=t.icon.f7,i=t.icon.url;return r||o?n("f7-icon",{attrs:{material:r,f7:o}}):n("img",{class:"media-node-base-icon",attrs:{src:this.$meta.util.combineFetchStaticPath(i)}})},_renderGroupItems:function(e){var t,n=this,r=e.group,o=this.$createElement,i=[],a=c(r.items);try{var s=function(){var e=t.value,r=o("div",{slot:"media"},[n._renderNodeMedia({item:e})]);i.push(o("eb-list-item",{key:e.type,attrs:{title:e.titleLocale,link:"#"},props:{onPerform:function(t){n.onPerformNode(t,e)}}},[r]))};for(a.s();!(t=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}return i},_renderGroups:function(){var e,t=this.$createElement,n=[],r=c(this.nodeBasesGroups);try{for(r.s();!(e=r.n()).done;){var o=e.value,i=this._renderGroupItems({group:o});n.push(t("f7-list-group",{key:o.name},[t("f7-list-item",{attrs:{"group-title":!0,title:o.titleLocale}}),i]))}}catch(e){r.e(e)}finally{r.f()}return n},_renderList:function(){var e=this.$createElement;if(this.ready)return e("f7-list",[this._renderGroups()])}},render:function(){var e=arguments[0];return e("eb-page",[e("eb-navbar",{attrs:{title:this.$text("Add Node"),"eb-back-link":"Back"}}),this._renderList()])}}},450:(e,t,n)=>{var r=n(233),o=n(361)(r);o.push([e.id,".diagram-actions {\n  position: fixed;\n  bottom: 6px;\n  right: 6px;\n  z-index: 200;\n}\n.diagram-actions .link {\n  color: var(--f7-grid-resize-handler-bg-color);\n  margin-left: 4px;\n}\n.x6-graph {\n  color: #333;\n}\n.media-node-base-icon {\n  height: 24px;\n  width: 24px;\n}\n.eb-flowchart-node-icon {\n  position: fixed;\n  height: 24px;\n  width: 24px;\n}\n.eb-flowchart-node-icon img {\n  height: 24px;\n  width: 24px;\n  border-radius: 6px;\n  border: 1px solid transparent;\n}\n.eb-flowchart-node-icon .icon {\n  position: static;\n  height: 24px;\n  width: 24px;\n}\n.eb-flowchart-node-label {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  word-break: break-word;\n  padding: 6px;\n}\n.eb-flowchart-node-label span {\n  text-align: center;\n}\n","",{version:3,sources:["webpack://./front/src/assets/css/module.less"],names:[],mappings:"AAAA;EACE,eAAA;EACA,WAAA;EACA,UAAA;EACA,YAAA;AACF;AALA;EAOI,6CAAA;EACA,gBAAA;AACJ;AAGA;EACE,WAAA;AADF;AAIA;EACE,YAAA;EACA,WAAA;AAFF;AAKA;EACE,eAAA;EACA,YAAA;EACA,WAAA;AAHF;AAAA;EAKI,YAAA;EACA,WAAA;EACA,kBAAA;EACA,6BAAA;AAFJ;AANA;EAWI,gBAAA;EACA,YAAA;EACA,WAAA;AAFJ;AAMA;EACE,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,sBAAA;EACA,YAAA;AAJF;AADA;EAQI,kBAAA;AAJJ",sourcesContent:[".diagram-actions {\n  position: fixed;\n  bottom: 6px;\n  right: 6px;\n  z-index: 200;\n\n  .link {\n    color: var(--f7-grid-resize-handler-bg-color);\n    margin-left: 4px;\n  }\n}\n\n.x6-graph {\n  color: #333;\n}\n\n.media-node-base-icon {\n  height: 24px;\n  width: 24px;\n}\n\n.eb-flowchart-node-icon {\n  position: fixed;\n  height: 24px;\n  width: 24px;\n  img {\n    height: 24px;\n    width: 24px;\n    border-radius: 6px;\n    border: 1px solid transparent;\n  }\n  .icon {\n    position: static;\n    height: 24px;\n    width: 24px;\n  }\n}\n\n.eb-flowchart-node-label {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  word-break: break-word;\n  padding: 6px;\n\n  span {\n    text-align: center;\n  }\n}\n"],sourceRoot:""}]),e.exports=o},361:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},233:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,o=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[1],a=o[3];if(!a)return i;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(c," */"),l=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([u]).join("\n")}return[i].join("\n")}},540:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(3),o=n.n(r),i=n(623),a=n(601),s=n(250);function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}const u={meta:{size:"large"},mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{contentEditDiagram:i.Z,contentEditSource:a.Z,contentEditListener:s.Z},data:function(){return{dirty:!1,contentProcess:null,contentProcessStr:null,contentListener:null,tabId:{diagram:o().prototype.$meta.util.nextId("tab"),source:o().prototype.$meta.util.nextId("tab"),listener:o().prototype.$meta.util.nextId("tab")},tabName:"diagram",contentEditDiagramInit:!1}},computed:{title:function(){return"".concat(this.dirty?"* ":"").concat(this.flowDef.atomName)},readOnly:function(){return this.contextParams.readOnly},flowDef:function(){return this.contextParams.item},flowDefId:function(){return this.flowDef.atomId},contentObj:function(){return this.flowDef.content?JSON.parse(this.flowDef.content):{}}},created:function(){var e=this.contentObj;this.contentProcess=e.process||this.$config.flowDef.default.process,this.contentProcessStr=window.JSON5.stringify(this.contentProcess,null,2),this.contentListener=e.listener||this.$config.flowDef.default.listener},methods:{onContentEditDiagramInit:function(){this.contentEditDiagramInit=!0},onContentChange:function(e){if(!this.readOnly){var t={};"process"===e.type?(this.contentProcess=e.value,t.process=e.value,e.valueStr?this.contentProcessStr=e.valueStr:this.contentProcessStr=window.JSON5.stringify(this.contentProcess,null,2)):"listener"===e.type&&(this.contentListener=e.value,t.listener=e.value);var n=JSON.stringify(this.$meta.util.extend({},this.contentObj,t));this.dirty=!0,this.contextCallback(200,{content:n})}},onSave:function(){this.$refs.buttonSave.onClick()},onPerformSave:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contextParams.onSave();case 2:return t.dirty=!1,e.abrupt("return",t.$text("Saved"));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))})()},onPerformAddNode:function(){this.$refs.diagram.onPerformAddNode()}}},l=(0,n(792).Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:e.title,"eb-back-link":"Back"}},[n("f7-nav-right",[!e.readOnly&&"diagram"===e.tabName&&e.contentEditDiagramInit?n("eb-link",{attrs:{iconF7:"::add",onPerform:e.onPerformAddNode}},[e._v("\n        "+e._s(e.$text("Add Node"))+"\n      ")]):e._e(),e._v(" "),e.readOnly?e._e():n("eb-link",{ref:"buttonSave",attrs:{iconF7:"::save",onPerform:e.onPerformSave}},[e._v(e._s(e.$text("Save")))])],1),e._v(" "),n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+e.tabId.diagram,tabLinkActive:"diagram"===e.tabName,text:e.$text("flowDefDiagramTitle")}}),e._v(" "),n("eb-link",{attrs:{"tab-link":"#"+e.tabId.source,tabLinkActive:"source"===e.tabName,text:e.$text("flowDefSourceTitle")}}),e._v(" "),n("eb-link",{attrs:{"tab-link":"#"+e.tabId.listener,tabLinkActive:"listener"===e.tabName,text:e.$text("flowDefListenerTitle")}})],1)],1)],1),e._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:e.tabId.diagram,ptr:!1,infinite:!1,tabActive:"diagram"===e.tabName,"data-ref":"diagram"},on:{"tab:show":function(t){e.tabName="diagram"}}},[n("content-edit-diagram",{ref:"diagram",attrs:{readOnly:e.readOnly,tabActive:"diagram"===e.tabName,flowDefId:e.flowDefId,contentProcessStr:e.contentProcessStr},on:{contentChange:e.onContentChange,contentEditDiagramInit:e.onContentEditDiagramInit}})],1),e._v(" "),n("eb-tab-page-content",{attrs:{id:e.tabId.source,ptr:!1,infinite:!1,tabActive:"source"===e.tabName,"data-ref":"source"},on:{"tab:show":function(t){e.tabName="source"}}},[n("content-edit-source",{attrs:{slot:"list",readOnly:e.readOnly,contentProcessStr:e.contentProcessStr,onSave:e.onSave},on:{contentChange:e.onContentChange},slot:"list"})],1),e._v(" "),n("eb-tab-page-content",{attrs:{id:e.tabId.listener,ptr:!1,infinite:!1,tabActive:"listener"===e.tabName,"data-ref":"listener"},on:{"tab:show":function(t){e.tabName="listener"}}},[n("content-edit-listener",{attrs:{slot:"list",readOnly:e.readOnly,contentListener:e.contentListener,onSave:e.onSave},on:{contentChange:e.onContentChange},slot:"list"})],1)],1)],1)}),[],!1,null,null,null).exports},334:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(3),o=n.n(r),i=n(623);const a={mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{contentEditDiagram:i.Z},data:function(){return{}},computed:{title:function(){return this.$text("Flow Chart")},contentProcess:function(){return this.contextParams.contentProcess},contentProcessStr:function(){return window.JSON5.stringify(this.contentProcess,null,2)},flowNodeDefIds:function(){return this.contextParams.flowNodeDefIds}},created:function(){},methods:{}},s=(0,n(792).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",[n("eb-navbar",{attrs:{title:e.title,"eb-back-link":"Back"}}),e._v(" "),n("content-edit-diagram",{attrs:{viewOnly:!0,readOnly:!0,tabActive:!0,contentProcessStr:e.contentProcessStr,flowNodeDefIds:e.flowNodeDefIds}})],1)}),[],!1,null,null,null).exports},746:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(3),o=n.n(r),i=n(770);const a={mixins:[o().prototype.$meta.module.get("a-components").options.mixins.ebPageContext],components:{schemaFieldsTab:i.Z},data:function(){return{flowDefId:parseInt(this.$f7route.query.flowDefId),nodeId:this.$f7route.query.nodeId,valueSchema:null,tabId:{read:o().prototype.$meta.util.nextId("tab"),write:o().prototype.$meta.util.nextId("tab")},tabName:"read"}},computed:{title:function(){return this.$text("Field Permissions")},context:function(){return this.contextParams.context},readOnly:function(){return this.contextParams.readOnly},value:function(){return this.contextParams.value},schemaReference:function(){return this.contextParams.schemaReference}},created:function(){this.valueSchema=this.value},methods:{onPerformDone:function(){this.contextCallback(200,this.valueSchema),this.$f7router.back()},onPerformInfo:function(){this.$view.navigate("/a/jsoneditor/json/editor?t=".concat(Date.now()),{target:"_self",context:{params:{value:this.schemaReference.schema,title:this.$text("ReferenceForHelp"),readOnly:!0}}})}}},s=(0,n(792).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[n("eb-navbar",{attrs:{title:e.title,"eb-back-link":"Back"}},[n("f7-nav-right",[e.readOnly?e._e():n("eb-link",{attrs:{iconF7:"::done",onPerform:e.onPerformDone}}),e._v(" "),e.schemaReference?n("eb-link",{attrs:{iconF7:"::info-circle",onPerform:e.onPerformInfo}}):e._e()],1),e._v(" "),n("f7-subnavbar",[n("f7-toolbar",{attrs:{top:"",tabbar:""}},[n("eb-link",{attrs:{"tab-link":"#"+e.tabId.read,tabLinkActive:"read"===e.tabName,text:e.$text("Read")}}),e._v(" "),n("eb-link",{attrs:{"tab-link":"#"+e.tabId.write,tabLinkActive:"write"===e.tabName,text:e.$text("Write")}})],1)],1)],1),e._v(" "),n("f7-tabs",{ref:"tabs"},[n("eb-tab-page-content",{attrs:{id:e.tabId.read,ptr:!1,infinite:!1,tabActive:"read"===e.tabName,"data-ref":"read"},on:{"tab:show":function(t){e.tabName="read"}}},[n("schema-fields-tab",{attrs:{context:e.context,readOnly:e.readOnly,mode:"read",valueSchema:e.valueSchema,schemaReference:e.schemaReference}})],1),e._v(" "),n("eb-tab-page-content",{attrs:{id:e.tabId.write,ptr:!1,infinite:!1,tabActive:"write"===e.tabName,"data-ref":"write"},on:{"tab:show":function(t){e.tabName="write"}}},[n("schema-fields-tab",{attrs:{context:e.context,readOnly:e.readOnly,mode:"write",valueSchema:e.valueSchema,schemaReference:e.schemaReference}})],1)],1)],1)}),[],!1,null,null,null).exports},792:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a,s){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,{Z:()=>r})},65:(e,t,n)=>{var r=n(450);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals),(0,n(159).Z)("ce1851f8",r,!0,{})},159:(e,t,n)=>{"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.d(t,{Z:()=>p});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,o){u=n,d=o||{};var a=r(e,t);return m(a),function(t){for(var n=[],o=0;o<a.length;o++){var s=a[o];(c=i[s.id]).refs--,n.push(c)}for(t?m(a=r(e,t)):a=[],o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(g(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(g(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+f+'~="'+e.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(h){var o=c++;r=s||(s=v()),t=x.bind(null,r,o,!1),n=x.bind(null,r,o,!0)}else r=v(),t=w.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var y,b=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function x(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function w(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(f,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},990:(e,t,n)=>{var r={"./flowDef/assigneesEdit.jsx":37,"./flowDef/behaviorEdit.jsx":249,"./flowDef/behaviors.jsx":373,"./flowDef/nodeProperties.jsx":887,"./flowDef/nodes.jsx":453};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=990},142:(e,t,n)=>{var r={"./flowDef/contentEdit.vue":540,"./flowDef/contentProcessView.vue":334,"./flowDef/schemaFields.vue":746};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=142},3:e=>{"use strict";e.exports=window.Vue}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e;n.r(r),n.d(r,{default:()=>t}),n(65);const t={install:function(t,r){return e?console.error("already installed."):(e=t,r({routes:n(644).Z,store:n(81).Z(e),config:n(788).Z,locales:n(137).Z,components:n(239).Z}))}}})(),window["a-flowchart"]=r})();
//# sourceMappingURL=front.js.map